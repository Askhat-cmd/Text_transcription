
# –î–û–ö–£–ú–ï–ù–¢ –¢–†–ï–ë–û–í–ê–ù–ò–ô –ö –ü–†–û–î–£–ö–¢–£ (–ü–†–î)

# –†–µ–¥–∏–∑–∞–π–Ω Web UI: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ —Å—Ç–∏–ª–µ ChatGPT + –£–¥–∞–ª–µ–Ω–∏–µ user_level

**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** 09.02.2026
**–ê–≤—Ç–æ—Ä:** AI Agent –¥–ª—è Cursor IDE
**–¶–µ–ª—å:** –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ Web UI + —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞

***

## –ö–†–ê–¢–ö–û–ï –†–ï–ó–Æ–ú–ï

–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Web UI –≤ —Å—Ç–∏–ª–µ ChatGPT —Å –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª—å—é –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–æ–≤, —É–¥–∞–ª–∏–≤ —É—Å—Ç–∞—Ä–µ–≤—à–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª `user_level`. –ù–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±–µ—Å–ø–µ—á–∏—Ç –ª—É—á—à–∏–π UX, –≤–∏–∑—É–∞–ª—å–Ω—É—é –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ–ª–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å SessionManager –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∏–∞–ª–æ–≥–æ–≤.

**–ö–ª—é—á–µ–≤—ã–µ –∑–∞–¥–∞—á–∏:**

- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ —Å—Ç–∏–ª–µ ChatGPT
- ‚úÖ –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å–æ —Å–ø–∏—Å–∫–æ–º –≤—Å–µ—Ö —á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ù–æ–≤—ã–π —á–∞—Ç" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —á–∞—Ç–∞–º–∏ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ `user_level` (–ø–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∫–æ–¥–∞)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ State Classification
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω (–¥–µ—Å–∫—Ç–æ–ø + –º–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è)
- ‚úÖ –¢—ë–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

***

## –û–ì–õ–ê–í–õ–ï–ù–ò–ï

1. [–ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è](#1-%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7-%D1%82%D0%B5%D0%BA%D1%83%D1%89%D0%B5%D0%B3%D0%BE-%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D1%8F)
2. [–¶–µ–ª–µ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ](#2-%D1%86%D0%B5%D0%BB%D0%B5%D0%B2%D0%BE%D0%B5-%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D0%B5)
3. [–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è UI/UX –¥–∏–∑–∞–π–Ω–∞](#3-%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F-uiux-%D0%B4%D0%B8%D0%B7%D0%B0%D0%B9%D0%BD%D0%B0)
4. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#4-%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F-%D0%B0%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0)
5. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#5-%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2)
6. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API](#6-%D0%B8%D0%BD%D1%82%D0%B5%D0%B3%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D1%81-api)
7. [–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: –£–¥–∞–ª–µ–Ω–∏–µ user_level](#7-%D1%80%D0%B5%D1%84%D0%B0%D0%BA%D1%82%D0%BE%D1%80%D0%B8%D0%BD%D0%B3-%D1%83%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-user_level)
8. [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º](#8-%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D0%B5%D0%BC)
9. [–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö](#9-%D0%BC%D0%BE%D0%B4%D0%B5%D0%BB%D0%B8-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85)
10. [–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏](#10-%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5-%D1%81%D1%86%D0%B5%D0%BD%D0%B0%D1%80%D0%B8%D0%B8)
11. [–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#11-%D0%BF%D0%BB%D0%B0%D0%BD-%D1%80%D0%B5%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8)
12. [–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](#12-%D1%81%D1%82%D1%80%D0%B0%D1%82%D0%B5%D0%B3%D0%B8%D1%8F-%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F)
13. [–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏](#13-%D0%BA%D1%80%D0%B8%D1%82%D0%B5%D1%80%D0%B8%D0%B8-%D0%BF%D1%80%D0%B8%D0%B5%D0%BC%D0%BA%D0%B8)

***

## 1. –ê–ù–ê–õ–ò–ó –¢–ï–ö–£–©–ï–ì–û –°–û–°–¢–û–Ø–ù–ò–Ø

### 1.1 –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Web UI

```
bot_psychologist/web_ui/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx              # –ö–æ—Ä–Ω–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ components/          # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ pages/              # –°—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îú‚îÄ‚îÄ services/           # API –≤—ã–∑–æ–≤—ã
‚îÇ   ‚îú‚îÄ‚îÄ hooks/              # –ö–∞—Å—Ç–æ–º–Ω—ã–µ React —Ö—É–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ types/              # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îî‚îÄ‚îÄ styles/             # CSS/Tailwind —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tailwind.config.js
‚îî‚îÄ‚îÄ vite.config.ts
```


### 1.2 –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

**–ü—Ä–æ–±–ª–µ–º—ã UI/UX:**

- ‚ùå –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–¥–∏–Ω–æ—á–Ω–æ–π —Å–µ—Å—Å–∏–∏ (–Ω–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–æ–≤)
- ‚ùå –ù–µ—Ç –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ —Å–æ —Å–ø–∏—Å–∫–æ–º —á–∞—Ç–æ–≤
- ‚ùå –†—É—á–Ω–æ–π –≤—ã–±–æ—Ä `user_level` (–ª–∏—à–Ω–∏–π —à–∞–≥ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- ‚ùå –ù–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–∏–º —á–∞—Ç–∞–º
- ‚ùå –ù–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ "–ù–æ–≤—ã–π —á–∞—Ç"

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**

- ‚ùå –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –º—É–ª—å—Ç–∏-—Å–µ—Å—Å–∏–æ–Ω–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º SessionManager
- ‚ùå `user_level` –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω –≤ API –∑–∞–ø—Ä–æ—Å–∞—Ö
- ‚ùå –ù–µ—Ç state management –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤
- ‚ùå –ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è user_id –≤ localStorage

***

## 2. –¶–ï–õ–ï–í–û–ï –°–û–°–¢–û–Ø–ù–ò–ï

### 2.1 –í–∏–∑—É–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω (—Å—Ç–∏–ª—å ChatGPT)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  [‚ò∞] Bot Psychologist              [üåô] [‚öôÔ∏è] [üë§]   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ               ‚îÇ                                      ‚îÇ
‚îÇ  [‚ûï –ù–æ–≤—ã–π —á–∞—Ç‚îÇ         –ù–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞                ‚îÇ
‚îÇ               ‚îÇ                                      ‚îÇ
‚îÇ üìù –ß–∞—Ç 1     ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ   5 –º–∏–Ω –Ω–∞–∑–∞–¥ ‚îÇ  ‚îÇ üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ö–∞–∫ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è‚îÇ ‚îÇ
‚îÇ              ‚îÇ  ‚îÇ                  —Å —Ç—Ä–µ–≤–æ–≥–æ–π?   ‚îÇ ‚îÇ
‚îÇ üìù –ß–∞—Ç 2     ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ   –°–µ–≥–æ–¥–Ω—è    ‚îÇ                                      ‚îÇ
‚îÇ              ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ üìù –ß–∞—Ç 3     ‚îÇ  ‚îÇ ü§ñ –ë–æ—Ç: –¢—Ä–µ–≤–æ–≥–∞ ‚Äî —ç—Ç–æ          ‚îÇ ‚îÇ
‚îÇ   –í—á–µ—Ä–∞      ‚îÇ  ‚îÇ         –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è...        ‚îÇ ‚îÇ
‚îÇ              ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ üìù –ß–∞—Ç 4     ‚îÇ                                      ‚îÇ
‚îÇ   2 –¥–Ω—è –Ω–∞–∑–∞–¥‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ              ‚îÇ  ‚îÇ üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –†–∞—Å—Å–∫–∞–∂–∏      ‚îÇ ‚îÇ
‚îÇ              ‚îÇ  ‚îÇ                 –ø–æ–¥—Ä–æ–±–Ω–µ–µ      ‚îÇ ‚îÇ
‚îÇ              ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ              ‚îÇ                                      ‚îÇ
‚îÇ              ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ              ‚îÇ  ‚îÇ –í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...[üé§]‚îÇ [üì§]  ‚îÇ
‚îÇ              ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
  –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å    –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —á–∞—Ç–∞
     (260px)              (flex-1)
```


### 2.2 –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

**–ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å (–ª–µ–≤–∞—è):**

- –ö–Ω–æ–ø–∫–∞ "‚ûï –ù–æ–≤—ã–π —á–∞—Ç" –≤–≤–µ—Ä—Ö—É
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —á–∞—Ç–æ–≤
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ (5 –º–∏–Ω –Ω–∞–∑–∞–¥, –°–µ–≥–æ–¥–Ω—è, –í—á–µ—Ä–∞)
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–∞–º (–°–µ–≥–æ–¥–Ω—è, –í—á–µ—Ä–∞, –ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π, –°—Ç–∞—Ä—ã–µ)
- –ò–∫–æ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —á–∞—Ç–∞ (üóëÔ∏è) –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —á–∞—Ç–∞

**–û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —á–∞—Ç–∞ (—Ü–µ–Ω—Ç—Ä):**

- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —á–∞—Ç–∞ –≤–≤–µ—Ä—Ö—É
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π
- –ê–≤–∞—Ç–∞—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (üë§) –∏ –±–æ—Ç–∞ (ü§ñ)
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ Markdown –≤ –æ—Ç–≤–µ—Ç–∞—Ö
- –ë–ª–æ–∫–∏ –∫–æ–¥–∞ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- –ü–æ–ª–µ –≤–≤–æ–¥–∞ –≤–Ω–∏–∑—É —Å –∫–Ω–æ–ø–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞

**–í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å:**

- –õ–æ–≥–æ—Ç–∏–ø "Bot Psychologist"
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã (üåô)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (‚öôÔ∏è)
- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (üë§)

***

## 3. –°–ü–ï–¶–ò–§–ò–ö–ê–¶–ò–Ø UI/UX –î–ò–ó–ê–ô–ù–ê

### 3.1 –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –º–∞–∫–µ—Ç–∞

**–¢–æ—á–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∞ (breakpoints):**

```css
/* –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ */
@media (max-width: 768px) {
  /* –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ –∫–Ω–æ–ø–∫–µ ‚ò∞ */
}

/* –ü–ª–∞–Ω—à–µ—Ç—ã */
@media (min-width: 769px) and (max-width: 1024px) {
  /* –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å 220px */
}

/* –î–µ—Å–∫—Ç–æ–ø */
@media (min-width: 1025px) {
  /* –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å 260px */
}
```

**–ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å:**

- –®–∏—Ä–∏–Ω–∞: 260px (–¥–µ—Å–∫—Ç–æ–ø), 220px (–ø–ª–∞–Ω—à–µ—Ç), –ø–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω (–º–æ–±–∏–ª—å–Ω—ã–µ)
- –§–æ–Ω: `bg-gray-50 dark:bg-gray-900`
- –ì—Ä–∞–Ω–∏—Ü–∞: `border-r border-gray-200 dark:border-gray-700`
- –û—Ç—Å—Ç—É–ø—ã: `p-4`

**–û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —á–∞—Ç–∞:**

- –®–∏—Ä–∏–Ω–∞: `flex-1` (–æ—Å—Ç–∞–≤—à–µ–µ—Å—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ)
- –ú–∞–∫—Å. —à–∏—Ä–∏–Ω–∞: `900px` (—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ)
- –§–æ–Ω: `bg-white dark:bg-gray-800`

**–°–æ–æ–±—â–µ–Ω–∏—è:**

- –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –°–ø—Ä–∞–≤–∞, `bg-blue-500 text-white`
- –°–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞: –°–ª–µ–≤–∞, `bg-gray-100 dark:bg-gray-700`
- –û—Ç—Å—Ç—É–ø—ã: `p-4`
- –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤: `rounded-xl`
- –ú–∞–∫—Å. —à–∏—Ä–∏–Ω–∞: `75%`


### 3.2 –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏—è

```css
/* –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Tailwind CSS */
fontFamily: {
  sans: ['Inter', 'system-ui', 'sans-serif'],
  mono: ['Fira Code', 'monospace'],
}

fontSize: {
  'chat-message': '16px',
  'chat-title': '14px',
  'sidebar-item': '14px',
}
```


### 3.3 –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞

**–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞:**

```css
:root {
  --color-primary: #6366f1; /* indigo-500 */
  --color-bg-main: #ffffff;
  --color-bg-sidebar: #f9fafb; /* gray-50 */
  --color-text-primary: #111827; /* gray-900 */
  --color-text-secondary: #6b7280; /* gray-500 */
  --color-border: #e5e7eb; /* gray-200 */
  --color-user-message: #3b82f6; /* blue-500 */
  --color-bot-message: #f3f4f6; /* gray-100 */
}
```

**–¢—ë–º–Ω–∞—è —Ç–µ–º–∞:**

```css
.dark {
  --color-bg-main: #1f2937; /* gray-800 */
  --color-bg-sidebar: #111827; /* gray-900 */
  --color-text-primary: #f9fafb; /* gray-50 */
  --color-text-secondary: #9ca3af; /* gray-400 */
  --color-border: #374151; /* gray-700 */
  --color-bot-message: #374151; /* gray-700 */
}
```


***

## 4. –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### 4.1 –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

**Frontend:**

- React 18.2+ (Hooks, Context API)
- TypeScript 5.0+
- Vite 5.0+ (–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–±–æ—Ä–∫–∏)
- Tailwind CSS 3.4+ (—Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è)
- Axios (HTTP –∫–ª–∏–µ–Ω—Ç)
- React Markdown (—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ markdown)
- date-fns (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç)

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º:**

```
–í–∞—Ä–∏–∞–Ω—Ç 1: Context API (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—á–∞–ª–∞)
–í–∞—Ä–∏–∞–Ω—Ç 2: Zustand (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –±–æ–ª–µ–µ –º–æ—â–Ω—ã–π state management)
```


### 4.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ (–Ω–æ–≤–∞—è)

```
bot_psychologist/web_ui/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx                    # –ö–æ—Ä–Ω–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ components/                # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Layout/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header.tsx        # –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Sidebar.tsx       # –õ–µ–≤–∞—è –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MainLayout.tsx    # –û–±—ë—Ä—Ç–∫–∞ –º–∞–∫–µ—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Chat/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatList.tsx      # –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatListItem.tsx  # –≠–ª–µ–º–µ–Ω—Ç —á–∞—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatView.tsx      # –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —á–∞—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Message.tsx       # –û–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MessageList.tsx   # –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MessageInput.tsx  # –ü–æ–ª–µ –≤–≤–æ–¥–∞ + –∫–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UI/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Button.tsx        # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–Ω–æ–ø–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Input.tsx         # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–≤–æ–¥–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Loading.tsx       # –°–ø–∏–Ω–Ω–µ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Avatar.tsx        # –ê–≤–∞—Ç–∞—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/–±–æ—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ThemeToggle.tsx   # –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Markdown/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ MarkdownRenderer.tsx  # –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ markdown
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ context/                   # React Context
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatContext.tsx       # –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–∞—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ThemeContext.tsx      # –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–µ–º—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserContext.tsx       # –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (user_id)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                     # –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ö—É–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useChats.ts           # –ü–æ–ª—É—á–µ–Ω–∏–µ/—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useMessages.ts        # –ü–æ–ª—É—á–µ–Ω–∏–µ/–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useLocalStorage.ts    # –û–±—ë—Ä—Ç–∫–∞ localStorage
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useAutoScroll.ts      # –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/                  # API –≤—ã–∑–æ–≤—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.ts                # –≠–∫–∑–µ–º–ø–ª—è—Ä Axios + –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chatService.ts        # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —á–∞—Ç–∞–º–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ messageService.ts     # –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ types/                     # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat.ts               # –¢–∏–ø—ã Chat, Message
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.ts                # –¢–∏–ø—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.ts               # –¢–∏–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ utils/                     # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dateFormat.ts         # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ generateChatTitle.ts  # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π —á–∞—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ storage.ts            # –ü–æ–º–æ—â–Ω–∏–∫–∏ localStorage
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ styles/
‚îÇ       ‚îú‚îÄ‚îÄ index.css             # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ + Tailwind
‚îÇ       ‚îî‚îÄ‚îÄ markdown.css          # –°—Ç–∏–ª–∏ –¥–ª—è markdown
‚îÇ
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ favicon.ico
‚îÇ
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tailwind.config.js
‚îú‚îÄ‚îÄ tsconfig.json
‚îî‚îÄ‚îÄ vite.config.ts
```


***

## 5. –°–¢–†–£–ö–¢–£–†–ê –ö–û–ú–ü–û–ù–ï–ù–¢–û–í

### 5.1 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç App

```tsx
// src/App.tsx
// –¶–ï–õ–¨: –ö–æ—Ä–Ω–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

import { ChatProvider } from './context/ChatContext';
import { ThemeProvider } from './context/ThemeContext';
import { UserProvider } from './context/UserContext';
import MainLayout from './components/Layout/MainLayout';

export default function App() {
  return (
    <ThemeProvider>
      <UserProvider>
        <ChatProvider>
          <MainLayout />
        </ChatProvider>
      </UserProvider>
    </ThemeProvider>
  );
}
```


### 5.2 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç MainLayout

```tsx
// src/components/Layout/MainLayout.tsx
// –¶–ï–õ–¨: –ì–ª–∞–≤–Ω—ã–π –º–∞–∫–µ—Ç —Å —Å–∞–π–¥–±–∞—Ä–æ–º –∏ –æ–±–ª–∞—Å—Ç—å—é —á–∞—Ç–∞

import { useState } from 'react';
import Header from './Header';
import Sidebar from './Sidebar';
import ChatView from '../Chat/ChatView';

export default function MainLayout() {
  const [sidebarOpen, setSidebarOpen] = useState(true);

  return (
    <div className="flex h-screen bg-gray-50 dark:bg-gray-900">
      {/* –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å */}
      <Sidebar 
        isOpen={sidebarOpen} 
        onClose={() => setSidebarOpen(false)} 
      />
      
      {/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */}
      <div className="flex flex-col flex-1">
        <Header onMenuClick={() => setSidebarOpen(!sidebarOpen)} />
        <ChatView />
      </div>
    </div>
  );
}
```


### 5.3 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç Sidebar

```tsx
// src/components/Layout/Sidebar.tsx
// –¶–ï–õ–¨: –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å–æ —Å–ø–∏—Å–∫–æ–º —á–∞—Ç–æ–≤ –∏ –∫–Ω–æ–ø–∫–æ–π "–ù–æ–≤—ã–π —á–∞—Ç"

import { useContext } from 'react';
import { ChatContext } from '../../context/ChatContext';
import ChatList from '../Chat/ChatList';
import Button from '../UI/Button';

interface SidebarProps {
  isOpen: boolean;
  onClose: () => void;
}

export default function Sidebar({ isOpen, onClose }: SidebarProps) {
  const { createNewChat } = useContext(ChatContext);

  return (
    <aside
      className={`
        ${isOpen ? 'translate-x-0' : '-translate-x-full'}
        md:translate-x-0 transition-transform duration-300
        w-full md:w-[260px] bg-gray-50 dark:bg-gray-900
        border-r border-gray-200 dark:border-gray-700
        flex flex-col
      `}
    >
      {/* –ö–Ω–æ–ø–∫–∞ "–ù–æ–≤—ã–π —á–∞—Ç" */}
      <div className="p-4">
        <Button
          onClick={createNewChat}
          className="w-full bg-indigo-500 hover:bg-indigo-600 text-white"
        >
          ‚ûï –ù–æ–≤—ã–π —á–∞—Ç
        </Button>
      </div>

      {/* –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ */}
      <ChatList />
    </aside>
  );
}
```


### 5.4 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ChatList

```tsx
// src/components/Chat/ChatList.tsx
// –¶–ï–õ–¨: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —á–∞—Ç–æ–≤ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –¥–∞—Ç–∞–º

import { useContext } from 'react';
import { ChatContext } from '../../context/ChatContext';
import ChatListItem from './ChatListItem';
import Loading from '../UI/Loading';

export default function ChatList() {
  const { chats, loading, activeChat, setActiveChat } = useContext(ChatContext);

  if (loading) {
    return <Loading />;
  }

  if (chats.length === 0) {
    return (
      <div className="p-4 text-center text-gray-500">
        –ù–µ—Ç —á–∞—Ç–æ–≤. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π!
      </div>
    );
  }

  // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —á–∞—Ç–æ–≤ –ø–æ –¥–∞—Ç–∞–º
  const groupedChats = groupChatsByDate(chats);

  return (
    <div className="flex-1 overflow-y-auto">
      {Object.entries(groupedChats).map(([dateLabel, chatsInGroup]) => (
        <div key={dateLabel}>
          <h3 className="px-4 py-2 text-xs font-semibold text-gray-500 uppercase">
            {dateLabel}
          </h3>
          {chatsInGroup.map((chat) => (
            <ChatListItem
              key={chat.session_id}
              chat={chat}
              isActive={activeChat?.session_id === chat.session_id}
              onClick={() => setActiveChat(chat)}
            />
          ))}
        </div>
      ))}
    </div>
  );
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
function groupChatsByDate(chats: Chat[]) {
  // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞: –°–µ–≥–æ–¥–Ω—è, –í—á–µ—Ä–∞, –ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π, –°—Ç–∞—Ä—ã–µ
  // ...—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
}
```


### 5.5 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç Message

```tsx
// src/components/Chat/Message.tsx
// –¶–ï–õ–¨: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∞–≤–∞—Ç–∞—Ä–∫–æ–π –∏ –≤—Ä–µ–º–µ–Ω–µ–º

import Avatar from '../UI/Avatar';
import MarkdownRenderer from '../Markdown/MarkdownRenderer';
import { formatDistanceToNow } from 'date-fns';
import { ru } from 'date-fns/locale';

interface MessageProps {
  message: Message;
}

export default function Message({ message }: MessageProps) {
  const isUser = message.role === 'user';

  return (
    <div className={`flex gap-4 ${isUser ? 'flex-row-reverse' : ''}`}>
      {/* –ê–≤–∞—Ç–∞—Ä–∫–∞ */}
      <Avatar type={isUser ? 'user' : 'bot'} />

      {/* –ö–æ–Ω—Ç–µ–Ω—Ç —Å–æ–æ–±—â–µ–Ω–∏—è */}
      <div className={`
        max-w-[75%] p-4 rounded-xl
        ${isUser 
          ? 'bg-blue-500 text-white' 
          : 'bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100'
        }
      `}>
        {isUser ? (
          <p>{message.content}</p>
        ) : (
          <MarkdownRenderer content={message.content} />
        )}

        {/* –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ */}
        <div className={`
          text-xs mt-2 opacity-70
          ${isUser ? 'text-right' : 'text-left'}
        `}>
          {formatDistanceToNow(new Date(message.timestamp), {
            addSuffix: true,
            locale: ru
          })}
        </div>
      </div>
    </div>
  );
}
```


### 5.6 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç MessageInput

```tsx
// src/components/Chat/MessageInput.tsx
// –¶–ï–õ–¨: –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Ä–∞–∑–º–µ—Ä–∞

import { useState, useRef, useEffect } from 'react';
import Button from '../UI/Button';

interface MessageInputProps {
  onSend: (text: string) => void;
  disabled?: boolean;
}

export default function MessageInput({ onSend, disabled }: MessageInputProps) {
  const [text, setText] = useState('');
  const textareaRef = useRef<HTMLTextAreaElement>(null);

  const handleSend = () => {
    if (text.trim()) {
      onSend(text);
      setText('');
    }
  };

  const handleKeyDown = (e: React.KeyboardEvent) => {
    // Enter –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç, Shift+Enter - –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      handleSend();
    }
  };

  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã textarea
  useEffect(() => {
    if (textareaRef.current) {
      textareaRef.current.style.height = 'auto';
      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;
    }
  }, [text]);

  return (
    <div className="p-4 border-t border-gray-200 dark:border-gray-700">
      <div className="flex gap-2">
        <textarea
          ref={textareaRef}
          value={text}
          onChange={(e) => setText(e.target.value)}
          onKeyDown={handleKeyDown}
          placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
          disabled={disabled}
          rows={1}
          className="
            flex-1 resize-none rounded-lg border border-gray-300
            dark:border-gray-600 px-4 py-3 focus:outline-none
            focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700
            max-h-40
          "
        />
        <Button
          onClick={handleSend}
          disabled={disabled || !text.trim()}
          className="bg-indigo-500 hover:bg-indigo-600 text-white px-6"
        >
          üì§
        </Button>
      </div>
    </div>
  );
}
```


***

## 6. –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° API

### 6.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API —Å–µ—Ä–≤–∏—Å–∞

```typescript
// src/services/api.ts
// –¶–ï–õ–¨: –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Axios —Å –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫–∞–º–∏

import axios from 'axios';

const API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:8000';

export const api = axios.create({
  baseURL: API_BASE_URL,
  timeout: 30000,
  headers: {
    'Content-Type': 'application/json',
  },
});

// –ü–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
api.interceptors.request.use((config) => {
  // –î–æ–±–∞–≤—å—Ç–µ API –∫–ª—é—á –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è
  // config.headers['X-API-Key'] = '–≤–∞—à-api-–∫–ª—é—á';
  return config;
});

// –ü–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫ –æ—Ç–≤–µ—Ç–æ–≤ (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫)
api.interceptors.response.use(
  (response) => response,
  (error) => {
    console.error('–û—à–∏–±–∫–∞ API:', error);
    return Promise.reject(error);
  }
);
```


### 6.2 –°–µ—Ä–≤–∏—Å —á–∞—Ç–æ–≤

```typescript
// src/services/chatService.ts
// –¶–ï–õ–¨: –û–ø–µ—Ä–∞—Ü–∏–∏ CRUD –¥–ª—è —á–∞—Ç–æ–≤

import { api } from './api';
import { Chat, ChatHistory } from '../types/chat';

export const chatService = {
  /**
   * –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π)
   */
  async getUserChats(userId: string): Promise<Chat[]> {
    const response = await api.get<ChatHistory>(
      `/api/v1/users/${userId}/history`,
      { params: { last_n_turns: 100 } }
    );

    // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ API –≤ Chat[]
    return transformHistoryToChats(response.data, userId);
  },

  /**
   * –ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —á–∞—Ç–∞
   */
  async getChatMessages(userId: string, sessionId: string): Promise<Message[]> {
    const response = await api.get<ChatHistory>(
      `/api/v1/users/${userId}/history`,
      { params: { last_n_turns: 100 } }
    );

    // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏
    return response.data.turns.filter(
      (turn) => turn.session_id === sessionId
    );
  },

  /**
   * –£–¥–∞–ª–∏—Ç—å —á–∞—Ç
   */
  async deleteChat(userId: string): Promise<void> {
    await api.delete(`/api/v1/users/${userId}/history`);
  },
};

function transformHistoryToChats(history: ChatHistory, userId: string): Chat[] {
  // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ turns –ø–æ session_id (–µ—Å–ª–∏ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Å—Å–∏–π)
  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π —á–∞—Ç–æ–≤ –∏–∑ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
  // ...—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
}
```


### 6.3 –°–µ—Ä–≤–∏—Å —Å–æ–æ–±—â–µ–Ω–∏–π

```typescript
// src/services/messageService.ts
// –¶–ï–õ–¨: –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ë–ï–ó user_level

import { api } from './api';
import { AdaptiveAnswerResponse } from '../types/api';

export const messageService = {
  /**
   * –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç –±–æ—Ç–∞
   * –í–ê–ñ–ù–û: user_level –£–î–ê–õ–Å–ù!
   */
  async sendMessage(
    question: string,
    userId: string
  ): Promise<AdaptiveAnswerResponse> {
    const response = await api.post<AdaptiveAnswerResponse>(
      '/api/v1/questions/adaptive',
      {
        question,
        user_id: userId,
        // user_level: –£–î–ê–õ–Å–ù!
        include_path: false,
        include_feedback_prompt: false,
        debug: false,
      }
    );

    return response.data;
  },
};
```


***

## 7. –†–ï–§–ê–ö–¢–û–†–ò–ù–ì: –£–î–ê–õ–ï–ù–ò–ï USER_LEVEL

### 7.1 –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–¶–µ–ª—å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å `user_level` –∏–∑ –≤—Å–µ–≥–æ —Å—Ç–µ–∫–∞ (Frontend ‚Üí API ‚Üí Backend).

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**

- State Classification –º–æ—â–Ω–µ–µ —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π
- –£–±–∏—Ä–∞–µ—Ç –ª–∏—à–Ω–∏–π —à–∞–≥ –∏–∑ UX
- –£–ø—Ä–æ—â–∞–µ—Ç –∫–æ–¥
- ChatGPT –Ω–µ –∏–º–µ–µ—Ç —Ä—É—á–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ —É—Ä–æ–≤–Ω—è


### 7.2 –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–æ Frontend

#### **7.2.1 –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ UI**

```tsx
// ‚ùå –£–î–ê–õ–ò–¢–¨ –≠–¢–û (—Å—Ç–∞—Ä—ã–π –∫–æ–¥):
<select name="user_level">
  <option value="beginner">–ù–∞—á–∏–Ω–∞—é—â–∏–π ‚Äî –±–∞–∑–æ–≤—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è</option>
  <option value="intermediate">–°—Ä–µ–¥–Ω–∏–π ‚Äî –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–∏–µ —Ç–µ–º—ã</option>
  <option value="advanced">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π ‚Äî —Å–ª–æ–∂–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏</option>
</select>
```

**–ù–æ–≤—ã–π UI:** –ù–∏–∫–∞–∫–æ–≥–æ dropdown, —Å—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞–µ–º —á–∞—Ç.

#### **7.2.2 –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ API –≤—ã–∑–æ–≤–æ–≤**

```typescript
// src/services/messageService.ts

// ‚ùå –°–¢–ê–†–û:
await api.post('/api/v1/questions/adaptive', {
  question,
  user_id: userId,
  user_level: 'intermediate', // ‚Üê –£–î–ê–õ–ò–¢–¨
});

// ‚úÖ –ù–û–í–û:
await api.post('/api/v1/questions/adaptive', {
  question,
  user_id: userId,
  // user_level —É–¥–∞–ª—ë–Ω!
});
```


#### **7.2.3 –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ —Ç–∏–ø–æ–≤**

```typescript
// src/types/api.ts

// ‚ùå –°–¢–ê–†–û:
export interface AskQuestionRequest {
  question: string;
  user_id: string;
  user_level: 'beginner' | 'intermediate' | 'advanced'; // ‚Üê –£–î–ê–õ–ò–¢–¨
}

// ‚úÖ –ù–û–í–û:
export interface AskQuestionRequest {
  question: string;
  user_id: string;
  // user_level —É–¥–∞–ª—ë–Ω!
}
```


### 7.3 –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Backend (API)

#### **7.3.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π API**

```python
# api/models.py

# ‚ùå –°–¢–ê–†–û:
class AskQuestionRequest(BaseModel):
    query: str
    user_id: str
    user_level: UserLevel = UserLevel.INTERMEDIATE  # ‚Üê –£–î–ê–õ–ò–¢–¨

# ‚úÖ –ù–û–í–û:
class AskQuestionRequest(BaseModel):
    query: str
    user_id: str
    # user_level —É–¥–∞–ª—ë–Ω!
    include_path: bool = False
    include_feedback_prompt: bool = False
    debug: bool = False
```


#### **7.3.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API —Ä–æ—É—Ç–æ–≤**

```python
# api/routes.py

@router.post("/questions/adaptive")
async def ask_adaptive_question(
    request: AskQuestionRequest,
    api_key: str = Depends(verify_api_key)
):
    # ‚ùå –°–¢–ê–†–û:
    result = answer_question_adaptive(
        request.query,
        user_id=request.user_id,
        user_level=request.user_level.value,  # ‚Üê –£–î–ê–õ–ò–¢–¨
        ...
    )
    
    # ‚úÖ –ù–û–í–û:
    result = answer_question_adaptive(
        request.query,
        user_id=request.user_id,
        # user_level –Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è!
        ...
    )
```


### 7.4 –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Backend (Bot Agent)

#### **7.4.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞—Ç—É—Ä —Ñ—É–Ω–∫—Ü–∏–π**

```python
# bot_agent/answer_adaptive.py

# ‚ùå –°–¢–ê–†–û:
def answer_question_adaptive(
    question: str,
    user_id: str,
    user_level: str = "intermediate",  # ‚Üê –£–î–ê–õ–ò–¢–¨ –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–º
    ...
):
    ...

# ‚úÖ –ù–û–í–û (–í–∞—Ä–∏–∞–Ω—Ç 1: –£–¥–∞–ª–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é):
def answer_question_adaptive(
    question: str,
    user_id: str,
    # user_level —É–¥–∞–ª—ë–Ω!
    ...
):
    ...

# ‚úÖ –ù–û–í–û (–í–∞—Ä–∏–∞–Ω—Ç 2: –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ —É—Å—Ç–∞—Ä–µ–≤—à–∏–π, –≤—Å–µ–≥–¥–∞ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å):
def answer_question_adaptive(
    question: str,
    user_id: str,
    user_level: str = None,  # —É—Å—Ç–∞—Ä–µ–≤—à–∏–π, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
    ...
):
    # –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å user_level, –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ State Classification
    ...
```


#### **7.4.2 –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–∏**

```python
# bot_agent/retrieval/local_search.py

# ‚ùå –°–¢–ê–†–û:
def filter_by_user_level(blocks, user_level):
    if user_level == "beginner":
        return [b for b in blocks if b.complexity_score < 0.5]
    elif user_level == "advanced":
        return [b for b in blocks if b.complexity_score > 0.7]
    return blocks

# ‚úÖ –ù–û–í–û:
# –ü–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ State Classification –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
# –ù–∏–∫–∞–∫–æ–π —Ä—É—á–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ user_level
```


### 7.5 –°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

**–§–∞–∑–∞ 1: –°–¥–µ–ª–∞—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º (–ù–µ–¥–µ–ª—è 1)**

```python
def answer_adaptive(
    question: str,
    user_id: str,
    user_level: str = None,  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, —É—Å—Ç–∞—Ä–µ–≤—à–∏–π
    ...
):
    if user_level:
        logger.warning("user_level —É—Å—Ç–∞—Ä–µ–ª –∏ –±—É–¥–µ—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω")
    # –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è user_level
```

**–§–∞–∑–∞ 2: –£–¥–∞–ª–∏—Ç—å –∏–∑ API (–ù–µ–¥–µ–ª—è 2)**

- –û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª–∏ API
- –û–±–Ω–æ–≤–∏—Ç—å —Ä–æ—É—Ç—ã API
- –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API

**–§–∞–∑–∞ 3: –£–¥–∞–ª–∏—Ç—å –∏–∑ Frontend (–ù–µ–¥–µ–ª—è 2)**

- –£–¥–∞–ª–∏—Ç—å dropdown –∏–∑ UI
- –£–¥–∞–ª–∏—Ç—å –∏–∑ API –≤—ã–∑–æ–≤–æ–≤
- –£–¥–∞–ª–∏—Ç—å –∏–∑ —Ç–∏–ø–æ–≤

**–§–∞–∑–∞ 4: –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–ù–µ–¥–µ–ª—è 3)**

- –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏–∑ –∫–æ–¥–∞
- –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã
- –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

***

## 8. –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–û–°–¢–û–Ø–ù–ò–ï–ú

### 8.1 ChatContext

```tsx
// src/context/ChatContext.tsx
// –¶–ï–õ–¨: –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —á–∞—Ç–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π

import { createContext, useState, useEffect, useContext } from 'react';
import { UserContext } from './UserContext';
import { chatService, messageService } from '../services';
import { Chat, Message } from '../types/chat';

interface ChatContextType {
  chats: Chat[];
  activeChat: Chat | null;
  messages: Message[];
  loading: boolean;
  sending: boolean;
  
  setActiveChat: (chat: Chat) => void;
  createNewChat: () => void;
  sendMessage: (text: string) => Promise<void>;
  deleteChat: (sessionId: string) => void;
  refreshChats: () => void;
}

export const ChatContext = createContext<ChatContextType>(null!);

export function ChatProvider({ children }: { children: React.ReactNode }) {
  const { userId } = useContext(UserContext);
  
  const [chats, setChats] = useState<Chat[]>([]);
  const [activeChat, setActiveChat] = useState<Chat | null>(null);
  const [messages, setMessages] = useState<Message[]>([]);
  const [loading, setLoading] = useState(false);
  const [sending, setSending] = useState(false);

  // –ó–∞–≥—Ä—É–∑–∫–∞ —á–∞—Ç–æ–≤ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
  useEffect(() => {
    if (userId) {
      loadChats();
    }
  }, [userId]);

  // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —á–∞—Ç–∞
  useEffect(() => {
    if (activeChat) {
      loadMessages(activeChat.session_id);
    }
  }, [activeChat]);

  const loadChats = async () => {
    setLoading(true);
    try {
      const data = await chatService.getUserChats(userId);
      setChats(data);
      
      // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–≤—ã–π —á–∞—Ç –∞–∫—Ç–∏–≤–Ω—ã–º, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ
      if (!activeChat && data.length > 0) {
        setActiveChat(data[^0]);
      }
    } catch (error) {
      console.error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–∞—Ç—ã:', error);
    } finally {
      setLoading(false);
    }
  };

  const loadMessages = async (sessionId: string) => {
    try {
      const data = await chatService.getChatMessages(userId, sessionId);
      setMessages(data);
    } catch (error) {
      console.error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
    }
  };

  const createNewChat = () => {
    const newChat: Chat = {
      session_id: generateSessionId(),
      title: '–ù–æ–≤—ã–π —á–∞—Ç',
      created_at: new Date().toISOString(),
      last_active: new Date().toISOString(),
      message_count: 0,
    };
    
    setChats([newChat, ...chats]);
    setActiveChat(newChat);
    setMessages([]);
  };

  const sendMessage = async (text: string) => {
    if (!activeChat) return;

    // –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å—Ä–∞–∑—É (–æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
    const userMessage: Message = {
      id: Date.now().toString(),
      role: 'user',
      content: text,
      timestamp: new Date().toISOString(),
    };
    setMessages((prev) => [...prev, userMessage]);

    setSending(true);
    try {
      // –í—ã–∑–æ–≤ API
      const response = await messageService.sendMessage(text, userId);

      // –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞
      const botMessage: Message = {
        id: Date.now().toString() + '-bot',
        role: 'assistant',
        content: response.answer,
        timestamp: new Date().toISOString(),
        metadata: {
          mode: response.recommended_mode,
          confidence: response.confidence_score,
        },
      };
      setMessages((prev) => [...prev, botMessage]);

      // –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞ (–µ—Å–ª–∏ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ)
      if (messages.length === 0) {
        const title = generateChatTitle(text);
        setActiveChat({ ...activeChat, title });
        setChats((prev) =>
          prev.map((c) =>
            c.session_id === activeChat.session_id ? { ...c, title } : c
          )
        );
      }
    } catch (error) {
      console.error('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:', error);
      // TODO: –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    } finally {
      setSending(false);
    }
  };

  const deleteChat = async (sessionId: string) => {
    try {
      await chatService.deleteChat(userId);
      setChats((prev) => prev.filter((c) => c.session_id !== sessionId));
      
      if (activeChat?.session_id === sessionId) {
        setActiveChat(chats[^0] || null);
      }
    } catch (error) {
      console.error('–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å —á–∞—Ç:', error);
    }
  };

  return (
    <ChatContext.Provider
      value={{
        chats,
        activeChat,
        messages,
        loading,
        sending,
        setActiveChat,
        createNewChat,
        sendMessage,
        deleteChat,
        refreshChats: loadChats,
      }}
    >
      {children}
    </ChatContext.Provider>
  );
}
```


***

## 9. –ú–û–î–ï–õ–ò –î–ê–ù–ù–´–•

### 9.1 TypeScript —Ç–∏–ø—ã

```typescript
// src/types/chat.ts
// –¶–ï–õ–¨: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–ª—è —á–∞—Ç–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π

export interface Chat {
  session_id: string;
  title: string;
  created_at: string;
  last_active: string;
  message_count: number;
  preview?: string; // –ü—Ä–µ–≤—å—é –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
}

export interface Message {
  id: string;
  role: 'user' | 'assistant';
  content: string;
  timestamp: string;
  metadata?: {
    mode?: string;
    confidence?: number;
    sources?: Source[];
  };
}

export interface Source {
  block_id: string;
  title: string;
  youtube_link: string;
  start: number;
  end: number;
}
```

```typescript
// src/types/api.ts
// –¶–ï–õ–¨: –¢–∏–ø—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ API

export interface AskQuestionRequest {
  question: string;
  user_id: string;
  // user_level –£–î–ê–õ–Å–ù!
  include_path?: boolean;
  include_feedback_prompt?: boolean;
  debug?: boolean;
}

export interface AdaptiveAnswerResponse {
  status: string;
  answer: string;
  state_analysis: StateAnalysis;
  concepts: string[];
  sources: Source[];
  recommended_mode?: string;
  confidence_level?: string;
  confidence_score?: number;
  metadata: Record<string, any>;
  timestamp: string;
  processing_time_seconds: number;
}

export interface StateAnalysis {
  primary_state: string;
  confidence: number;
  emotional_tone: string;
  recommendations: string[];
}
```


***

## 10. –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–ï –°–¶–ï–ù–ê–†–ò–ò

### 10.1 –°—Ü–µ–Ω–∞—Ä–∏–π –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç http://localhost:3000
   ‚Üì
2. UserContext –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç user_id, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ localStorage
   ‚Üì
3. –ß–∞—Ç–æ–≤ –Ω–µ—Ç ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
   "–ù–µ—Ç —á–∞—Ç–æ–≤. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π!"
   ‚Üì
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "‚ûï –ù–æ–≤—ã–π —á–∞—Ç"
   ‚Üì
5. –°–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π —á–∞—Ç —Å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º session_id
   ‚Üì
6. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ: "–ö–∞–∫ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å —Ç—Ä–µ–≤–æ–≥–æ–π?"
   ‚Üì
7. –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ API (–ë–ï–ó user_level)
   ‚Üì
8. –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ 3-5 —Å–µ–∫—É–Ω–¥
   ‚Üì
9. –ù–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è: "–°–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å —Ç—Ä–µ–≤–æ–≥–æ–π"
   ‚Üì
10. –ß–∞—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
```


### 10.2 –°—Ü–µ–Ω–∞—Ä–∏–π –≤–æ–∑–≤—Ä–∞—â–∞—é—â–µ–≥–æ—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   ‚Üì
2. UserContext –∑–∞–≥—Ä—É–∂–∞–µ—Ç user_id –∏–∑ localStorage
   ‚Üì
3. ChatContext –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ —á–∞—Ç—ã –¥–ª—è user_id
   ‚Üì
4. –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —á–∞—Ç–æ–≤
   ‚Üì
5. –ü–µ—Ä–≤—ã–π —á–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±—Ä–∞–Ω
   ‚Üì
6. –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —á–∞—Ç–∞
   ‚Üì
7. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç:
   - –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä –≤ –∞–∫—Ç–∏–≤–Ω–æ–º —á–∞—Ç–µ
   - –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –¥—Ä—É–≥–æ–π —á–∞—Ç –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
   - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —á–∞—Ç
   - –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —á–∞—Ç—ã
```


***

## 11. –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### 11.1 –ì—Ä–∞—Ñ–∏–∫ (3-4 –¥–Ω—è)

**–î–µ–Ω—å 1: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (6-8 —á–∞—Å–æ–≤)**

- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ Context (ChatContext, UserContext, ThemeContext)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ Layout (Header, Sidebar, MainLayout)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ Chat (ChatList, ChatView, Message)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API —Å–µ—Ä–≤–∏—Å–∞ —Å axios
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ user_level –∏–∑ —Ç–∏–ø–æ–≤

**–î–µ–Ω—å 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è API (6-8 —á–∞—Å–æ–≤)**

- ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è chatService (getUserChats, getChatMessages, deleteChat)
- ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è messageService (sendMessage –ë–ï–ó user_level)
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ ChatContext –∫ API
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Ç–∞
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ backend API –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ user_level

**–î–µ–Ω—å 3: –ü–æ–ª–∏—Ä–æ–≤–∫–∞ UI (6-8 —á–∞—Å–æ–≤)**

- ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è MessageInput —Å –∞–≤—Ç–æ–∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Ä–∞–∑–º–µ—Ä–∞
- ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –≤ MessageList
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π Loading (—Å–ø–∏–Ω–Ω–µ—Ä, —Å–∫–µ–ª–µ—Ç–æ–Ω)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
- ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏–π —á–∞—Ç–æ–≤
- ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —á–∞—Ç–æ–≤ –ø–æ –¥–∞—Ç–∞–º
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ hover –∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

**–î–µ–Ω—å 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤ (4-6 —á–∞—Å–æ–≤)**

- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ user_level (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã State Classification)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

***

## 12. –°–¢–†–ê–¢–ï–ì–ò–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### 12.1 –ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

```typescript
// src/components/Chat/__tests__/Message.test.tsx
// –¶–ï–õ–¨: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ Message

import { render, screen } from '@testing-library/react';
import Message from '../Message';

describe('–ö–æ–º–ø–æ–Ω–µ–Ω—Ç Message', () => {
  it('–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', () => {
    const message = {
      id: '1',
      role: 'user',
      content: '–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ',
      timestamp: new Date().toISOString(),
    };

    render(<Message message={message} />);
    expect(screen.getByText('–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ')).toBeInTheDocument();
  });

  it('–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞ —Å markdown', () => {
    const message = {
      id: '2',
      role: 'assistant',
      content: '**–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç**',
      timestamp: new Date().toISOString(),
    };

    render(<Message message={message} />);
    expect(screen.getByText('–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç')).toHaveStyle({ fontWeight: 'bold' });
  });
});
```


### 12.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

```typescript
// src/services/__tests__/messageService.test.ts
// –¶–ï–õ–¨: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

import { messageService } from '../messageService';
import { api } from '../api';

jest.mock('../api');

describe('–°–µ—Ä–≤–∏—Å —Å–æ–æ–±—â–µ–Ω–∏–π', () => {
  it('–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –±–µ–∑ user_level', async () => {
    const mockResponse = {
      data: {
        status: 'success',
        answer: '–¢–µ—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç',
      },
    };

    (api.post as jest.Mock).mockResolvedValue(mockResponse);

    const result = await messageService.sendMessage(
      '–¢–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å',
      'user_123'
    );

    expect(api.post).toHaveBeenCalledWith(
      '/api/v1/questions/adaptive',
      expect.objectContaining({
        question: '–¢–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å',
        user_id: 'user_123',
        // user_level –ù–ï –≤–∫–ª—é—á—ë–Ω!
      })
    );

    expect(result.answer).toBe('–¢–µ—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç');
  });
});
```


***

## 13. –ö–†–ò–¢–ï–†–ò–ò –ü–†–ò–ï–ú–ö–ò

### 13.1 –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

**–ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å:**

- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ù–æ–≤—ã–π —á–∞—Ç" —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é
- ‚úÖ –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ API
- ‚úÖ –ö–ª–∏–∫ –Ω–∞ —á–∞—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç
- ‚úÖ –ß–∞—Ç—ã –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ –¥–∞—Ç–µ (–°–µ–≥–æ–¥–Ω—è, –í—á–µ—Ä–∞ –∏ —Ç.–¥.)
- ‚úÖ –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è
- ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è

**–û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —á–∞—Ç–∞:**

- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–ø—Ä–∞–≤–∞, –±–æ—Ç–∞ —Å–ª–µ–≤–∞
- ‚úÖ Markdown —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**–ü–æ–ª–µ –≤–≤–æ–¥–∞:**

- ‚úÖ Enter –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
- ‚úÖ Shift+Enter –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É
- ‚úÖ Textarea –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–º–µ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä (–¥–æ max-height)
- ‚úÖ Disabled —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API:**

- ‚úÖ `user_level` –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –±–µ–∑ user_level
- ‚úÖ –û—Ç–≤–µ—Ç—ã –±–æ—Ç–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã (—á–µ—Ä–µ–∑ State Classification)
- ‚úÖ –ß–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ SQLite —á–µ—Ä–µ–∑ SessionManager


### 13.2 –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**

- ‚úÖ –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è < 500–º—Å
- ‚úÖ –ó–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è < 5—Å (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç OpenAI)
- ‚úÖ –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ (–ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ Chrome DevTools)
- ‚úÖ –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ (60 FPS)

**–£–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

- ‚úÖ –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- ‚úÖ –ß—ë—Ç–∫–∞—è –≤–∏–∑—É–∞–ª—å–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è
- ‚úÖ –ù–µ—Ç –∂–∞—Ä–≥–æ–Ω–∞ –≤ UI (–ø—Ä–æ—Å—Ç—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏)

**–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:**

- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å–∫—Ä–∏–Ω-—Ä–∏–¥–µ—Ä–∞–º–∏
- ‚úÖ –ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å —Ü–≤–µ—Ç–æ–≤ WCAG AA

**–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:**

- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ (1920x1080)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–µ (768x1024)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º (375x667)

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤:**

- ‚úÖ Chrome 100+
- ‚úÖ Firefox 100+
- ‚úÖ Safari 15+
- ‚úÖ Edge 100+

***

## –§–ò–ù–ê–õ–¨–ù–´–ô –ß–ï–ö–õ–ò–°–¢

**–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

- [ ] –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å, —á—Ç–æ API endpoints –¥–æ—Å—Ç—É–ø–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ SessionManager –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Å—Å–∏–π
- [ ] –°–¥–µ–ª–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Ç–µ–∫—É—â–µ–≥–æ web_ui (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –°–æ–∑–¥–∞—Ç—å feature –≤–µ—Ç–∫—É: `git checkout -b feature/chatgpt-ui-redesign`

**–í–æ –≤—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

- [ ] –°–ª–µ–¥–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–∑ –†–∞–∑–¥–µ–ª–∞ 5
- [ ] –£–¥–∞–ª–∏—Ç—å user_level –∏–∑ –í–°–ï–• –º–µ—Å—Ç (Frontend, API, Backend)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ State Classification –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- [ ] –î–µ–ª–∞—Ç—å —á–∞—Å—Ç—ã–µ –∫–æ–º–º–∏—Ç—ã —Å —á—ë—Ç–∫–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

**–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã (–º–æ–¥—É–ª—å–Ω—ã–µ, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ, E2E)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö/–ø–ª–∞–Ω—à–µ—Ç–∞—Ö
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—ë–º–Ω—É—é —Ç–µ–º—É
- [ ] –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ staging –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- [ ] User acceptance testing
- [ ] –°–ª–∏—Ç—å –≤ main –≤–µ—Ç–∫—É

***

## –í–ê–ñ–ù–û–ï –ü–†–ò–ú–ï–ß–ê–ù–ò–ï –î–õ–Ø CURSOR AI

‚ö†Ô∏è –≠—Ç–æ—Ç –ü–†–î —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã –ò –ü–†–ò–õ–û–ñ–ï–ù–ò–ï A –≤ –∫–æ–Ω—Ü–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞.
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø A –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ —á–∞—Å—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
–°–ª–µ–¥—É–π—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º –≤ –∫–æ–¥–µ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.


***
## ---

## –ü–†–ò–õ–û–ñ–ï–ù–ò–ï A: –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ –ù–ê–°–¢–†–û–ï–ö

**–í–ù–ò–ú–ê–ù–ò–ï –î–õ–Ø CURSOR AI:** –≠—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–æ–≥–ª–∞—Å–Ω–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º.

### A.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫
[–≤—Å—Ç–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –¥–µ—Ä–µ–≤–æ –ø–∞–ø–æ–∫]

### A.2 –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
[–≤—Å—Ç–∞–≤–∏—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Settings/*]

### A.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
[–≤—Å—Ç–∞–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π Header.tsx –∏ App.tsx]

### A.4 –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏
[–≤—Å—Ç–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏ –¥–ª—è Settings]





# –î–û–ü–û–õ–ù–ï–ù–ò–ï –ö –ü–†–î: –ö–û–ú–ü–û–ù–ï–ù–¢ –ù–ê–°–¢–†–û–ï–ö

## –û–ë–ù–û–í–õ–ï–ù–ò–ï: –†–∞–∑–¥–µ–ª 4.2 - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

```
bot_psychologist/web_ui/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Layout/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header.tsx           # –û–ë–ù–û–í–õ–ï–ù–û: + –∫–Ω–æ–ø–∫–∞ Settings
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Sidebar.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MainLayout.tsx
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Chat/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatList.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatListItem.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatView.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Message.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MessageList.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MessageInput.tsx
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Settings/                # –ù–û–í–û–ï: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SettingsModal.tsx   # –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SystemInfo.tsx      # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UISettings.tsx      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BotSettings.tsx     # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π –±–æ—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ThemeSelector.tsx   # –í—ã–±–æ—Ä —Ç–µ–º—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ DataManagement.tsx  # –≠–∫—Å–ø–æ—Ä—Ç/—É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UI/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Button.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Input.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Loading.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Avatar.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ThemeToggle.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Toggle.tsx          # –ù–û–í–û–ï: Toggle switch –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Badge.tsx           # –ù–û–í–û–ï: Badge –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Modal.tsx           # –ù–û–í–û–ï: –ë–∞–∑–æ–≤—ã–π modal wrapper
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Markdown/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ MarkdownRenderer.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ context/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatContext.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ThemeContext.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserContext.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SettingsContext.tsx      # –ù–û–í–û–ï: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useChats.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useMessages.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useLocalStorage.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useAutoScroll.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useSettings.ts           # –ù–û–í–û–ï: –•—É–∫ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings.ts              # –ù–û–í–û–ï: –¢–∏–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ dateFormat.ts
‚îÇ       ‚îú‚îÄ‚îÄ generateChatTitle.ts
‚îÇ       ‚îî‚îÄ‚îÄ storage.ts
```


***

## –†–ê–ó–î–ï–õ 5.8: –ö–û–ú–ü–û–ù–ï–ù–¢–´ –ù–ê–°–¢–†–û–ï–ö

### 5.8.1 –¢–∏–ø—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫

```typescript
// src/types/settings.ts
// –¶–ï–õ–¨: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

export interface AppSettings {
  // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
  autoScroll: boolean;              // –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —á–∞—Ç–∞
  showSources: boolean;             // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏
  compactMode: boolean;             // –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º —Å–æ–æ–±—â–µ–Ω–∏–π
  fontSize: 'small' | 'medium' | 'large'; // –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞
  
  // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π –±–æ—Ç–∞
  includePathRecommendation: boolean;  // –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
  includeFeedbackPrompt: boolean;      // –ó–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å
  enableEmotionAnalysis: boolean;      // –ê–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–π
  
  // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–º—ã
  theme: 'light' | 'dark' | 'system';  // –¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
  
  // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–¥–ª—è –±—É–¥—É—â–µ–≥–æ)
  enableNotifications: boolean;
  soundEnabled: boolean;
}

export const DEFAULT_SETTINGS: AppSettings = {
  autoScroll: true,
  showSources: true,
  compactMode: false,
  fontSize: 'medium',
  includePathRecommendation: true,
  includeFeedbackPrompt: false,
  enableEmotionAnalysis: true,
  theme: 'system',
  enableNotifications: false,
  soundEnabled: false,
};

export interface StateInfo {
  primary_state: string;
  confidence: number;
  emotional_tone: string;
  depth: string;
  recommended_mode?: string;
}
```


***

### 5.8.2 SettingsContext

```typescript
// src/context/SettingsContext.tsx
// –¶–ï–õ–¨: –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

import { createContext, useState, useEffect, ReactNode } from 'react';
import { AppSettings, DEFAULT_SETTINGS } from '../types/settings';

interface SettingsContextType {
  settings: AppSettings;
  updateSettings: (updates: Partial<AppSettings>) => void;
  resetSettings: () => void;
  isSettingsOpen: boolean;
  openSettings: () => void;
  closeSettings: () => void;
}

export const SettingsContext = createContext<SettingsContextType>(null!);

const SETTINGS_STORAGE_KEY = 'bot_psychologist_settings';

export function SettingsProvider({ children }: { children: ReactNode }) {
  const [settings, setSettings] = useState<AppSettings>(DEFAULT_SETTINGS);
  const [isSettingsOpen, setIsSettingsOpen] = useState(false);

  // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ localStorage –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
  useEffect(() => {
    const storedSettings = localStorage.getItem(SETTINGS_STORAGE_KEY);
    if (storedSettings) {
      try {
        const parsed = JSON.parse(storedSettings);
        setSettings({ ...DEFAULT_SETTINGS, ...parsed });
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
      }
    }
  }, []);

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ localStorage –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
  useEffect(() => {
    localStorage.setItem(SETTINGS_STORAGE_KEY, JSON.stringify(settings));
  }, [settings]);

  const updateSettings = (updates: Partial<AppSettings>) => {
    setSettings((prev) => ({ ...prev, ...updates }));
  };

  const resetSettings = () => {
    setSettings(DEFAULT_SETTINGS);
    localStorage.removeItem(SETTINGS_STORAGE_KEY);
  };

  const openSettings = () => setIsSettingsOpen(true);
  const closeSettings = () => setIsSettingsOpen(false);

  return (
    <SettingsContext.Provider
      value={{
        settings,
        updateSettings,
        resetSettings,
        isSettingsOpen,
        openSettings,
        closeSettings,
      }}
    >
      {children}
    </SettingsContext.Provider>
  );
}
```


***

### 5.8.3 –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Header

```tsx
// src/components/Layout/Header.tsx
// –¶–ï–õ–¨: –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å —Å –∫–Ω–æ–ø–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ badge —Å–æ—Å—Ç–æ—è–Ω–∏—è

import { useContext, useState } from 'react';
import { ThemeContext } from '../../context/ThemeContext';
import { SettingsContext } from '../../context/SettingsContext';
import { ChatContext } from '../../context/ChatContext';
import Badge from '../UI/Badge';
import Button from '../UI/Button';

interface HeaderProps {
  onMenuClick: () => void;
}

export default function Header({ onMenuClick }: HeaderProps) {
  const { theme, toggleTheme } = useContext(ThemeContext);
  const { openSettings } = useContext(SettingsContext);
  const { stateAnalysis } = useContext(ChatContext);
  const [showStateDetails, setShowStateDetails] = useState(false);

  return (
    <header className="h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between px-4">
      {/* –õ–µ–≤–∞—è —á–∞—Å—Ç—å: –ú–µ–Ω—é + –õ–æ–≥–æ—Ç–∏–ø */}
      <div className="flex items-center gap-4">
        {/* –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—é (–º–æ–±–∏–ª—å–Ω—ã–µ) */}
        <button
          onClick={onMenuClick}
          className="md:hidden p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"
        >
          ‚ò∞
        </button>

        {/* –õ–æ–≥–æ—Ç–∏–ø */}
        <div className="flex items-center gap-2">
          <span className="text-2xl">üß†</span>
          <h1 className="text-lg font-semibold text-gray-900 dark:text-gray-100">
            Bot Psychologist
          </h1>
        </div>
      </div>

      {/* –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: State Badge + –¢–µ–º–∞ + –ù–∞—Å—Ç—Ä–æ–π–∫–∏ + –ü—Ä–æ—Ñ–∏–ª—å */}
      <div className="flex items-center gap-3">
        {/* Badge —Å–æ—Å—Ç–æ—è–Ω–∏—è */}
        {stateAnalysis && (
          <div className="relative">
            <Badge
              icon={getStateEmoji(stateAnalysis.primary_state)}
              label={translateState(stateAnalysis.primary_state)}
              onClick={() => setShowStateDetails(!showStateDetails)}
              className="cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700"
            />

            {/* –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏ */}
            {showStateDetails && (
              <div className="absolute top-full right-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4 z-50">
                <h3 className="text-sm font-semibold mb-2">
                  –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
                </h3>
                <div className="space-y-2 text-sm">
                  <div className="flex justify-between">
                    <span className="text-gray-600 dark:text-gray-400">
                      –°–æ—Å—Ç–æ—è–Ω–∏–µ:
                    </span>
                    <span className="font-medium">
                      {translateState(stateAnalysis.primary_state)}
                    </span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600 dark:text-gray-400">
                      –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å:
                    </span>
                    <span className="font-medium">
                      {(stateAnalysis.confidence * 100).toFixed(0)}%
                    </span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600 dark:text-gray-400">
                      –≠–º–æ—Ü. —Ç–æ–Ω:
                    </span>
                    <span className="font-medium">
                      {stateAnalysis.emotional_tone}
                    </span>
                  </div>
                </div>
              </div>
            )}
          </div>
        )}

        {/* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã */}
        <button
          onClick={toggleTheme}
          className="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"
          title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É"
        >
          {theme === 'dark' ? '‚òÄÔ∏è' : 'üåô'}
        </button>

        {/* –ö–Ω–æ–ø–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ */}
        <button
          onClick={openSettings}
          className="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"
          title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
        >
          ‚öôÔ∏è
        </button>

        {/* –ü—Ä–æ—Ñ–∏–ª—å (–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –±—É–¥—É—â–µ–≥–æ) */}
        <button
          className="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"
          title="–ü—Ä–æ—Ñ–∏–ª—å"
        >
          üë§
        </button>
      </div>
    </header>
  );
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
function getStateEmoji(state: string): string {
  const emojiMap: Record<string, string> = {
    curious: 'üòä',
    confused: 'üòï',
    overwhelmed: 'üò∞',
    seeking: 'üîç',
    reflecting: 'ü§î',
    resistant: 'üõ°Ô∏è',
    open: 'üåü',
    unaware: '‚ùì',
    ready: '‚úÖ',
    integrating: 'üß©',
  };
  return emojiMap[state.toLowerCase()] || 'üòä';
}

function translateState(state: string): string {
  const translations: Record<string, string> = {
    curious: '–õ—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ',
    confused: '–ó–∞–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ',
    overwhelmed: '–ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞',
    seeking: '–ü–æ–∏—Å–∫',
    reflecting: '–†–∞–∑–º—ã—à–ª–µ–Ω–∏–µ',
    resistant: '–°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ',
    open: '–û—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å',
    unaware: '–ù–µ–æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å',
    ready: '–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å',
    integrating: '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è',
  };
  return translations[state.toLowerCase()] || state;
}
```


***

### 5.8.4 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç Badge

```tsx
// src/components/UI/Badge.tsx
// –¶–ï–õ–¨: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π badge –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

interface BadgeProps {
  icon?: string;
  label: string;
  onClick?: () => void;
  className?: string;
}

export default function Badge({ icon, label, onClick, className = '' }: BadgeProps) {
  return (
    <div
      onClick={onClick}
      className={`
        inline-flex items-center gap-2 px-3 py-1.5 rounded-full
        bg-gray-100 dark:bg-gray-700
        text-sm font-medium text-gray-700 dark:text-gray-300
        transition-colors duration-200
        ${onClick ? 'cursor-pointer' : ''}
        ${className}
      `}
    >
      {icon && <span className="text-base">{icon}</span>}
      <span>{label}</span>
    </div>
  );
}
```


***

### 5.8.5 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç Toggle

```tsx
// src/components/UI/Toggle.tsx
// –¶–ï–õ–¨: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–∫–ª/–≤—ã–∫–ª

interface ToggleProps {
  checked: boolean;
  onChange: (checked: boolean) => void;
  disabled?: boolean;
}

export default function Toggle({ checked, onChange, disabled = false }: ToggleProps) {
  return (
    <button
      type="button"
      role="switch"
      aria-checked={checked}
      onClick={() => !disabled && onChange(!checked)}
      disabled={disabled}
      className={`
        relative inline-flex h-6 w-11 items-center rounded-full
        transition-colors duration-200 ease-in-out
        focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2
        ${checked ? 'bg-indigo-600' : 'bg-gray-200 dark:bg-gray-700'}
        ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}
      `}
    >
      <span
        className={`
          inline-block h-4 w-4 transform rounded-full bg-white
          transition duration-200 ease-in-out
          ${checked ? 'translate-x-6' : 'translate-x-1'}
        `}
      />
    </button>
  );
}
```


***

### 5.8.6 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç Modal

```tsx
// src/components/UI/Modal.tsx
// –¶–ï–õ–¨: –ë–∞–∑–æ–≤–∞—è –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω

import { useEffect, ReactNode } from 'react';

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  title: string;
  children: ReactNode;
  footer?: ReactNode;
}

export default function Modal({ isOpen, onClose, title, children, footer }: ModalProps) {
  // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Escape
  useEffect(() => {
    const handleEscape = (e: KeyboardEvent) => {
      if (e.key === 'Escape') onClose();
    };

    if (isOpen) {
      document.addEventListener('keydown', handleEscape);
      // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ body
      document.body.style.overflow = 'hidden';
    }

    return () => {
      document.removeEventListener('keydown', handleEscape);
      document.body.style.overflow = 'unset';
    };
  }, [isOpen, onClose]);

  if (!isOpen) return null;

  return (
    <div
      className="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"
      onClick={onClose}
    >
      <div
        className="bg-white dark:bg-gray-800 rounded-xl w-full max-w-lg mx-4 shadow-2xl"
        onClick={(e) => e.stopPropagation()} // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω—É—Ç—Ä–∏
      >
        {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
        <div className="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700">
          <h2 className="text-xl font-semibold text-gray-900 dark:text-gray-100">
            {title}
          </h2>
          <button
            onClick={onClose}
            className="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 text-2xl leading-none"
          >
            ‚úï
          </button>
        </div>

        {/* –ö–æ–Ω—Ç–µ–Ω—Ç */}
        <div className="p-6 max-h-[70vh] overflow-y-auto">
          {children}
        </div>

        {/* Footer (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) */}
        {footer && (
          <div className="p-6 border-t border-gray-200 dark:border-gray-700">
            {footer}
          </div>
        )}
      </div>
    </div>
  );
}
```


***

### 5.8.7 –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç SettingsModal

```tsx
// src/components/Settings/SettingsModal.tsx
// –¶–ï–õ–¨: –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

import { useContext } from 'react';
import { SettingsContext } from '../../context/SettingsContext';
import { ChatContext } from '../../context/ChatContext';
import Modal from '../UI/Modal';
import SystemInfo from './SystemInfo';
import UISettings from './UISettings';
import BotSettings from './BotSettings';
import ThemeSelector from './ThemeSelector';
import DataManagement from './DataManagement';
import Button from '../UI/Button';

export default function SettingsModal() {
  const { isSettingsOpen, closeSettings, resetSettings } = useContext(SettingsContext);
  const { stateAnalysis } = useContext(ChatContext);

  const handleReset = () => {
    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏?')) {
      resetSettings();
    }
  };

  return (
    <Modal
      isOpen={isSettingsOpen}
      onClose={closeSettings}
      title="‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"
      footer={
        <div className="flex gap-3">
          <Button
            onClick={handleReset}
            variant="outline"
            className="flex-1"
          >
            –°–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë
          </Button>
          <Button
            onClick={closeSettings}
            variant="primary"
            className="flex-1"
          >
            –ì–æ—Ç–æ–≤–æ
          </Button>
        </div>
      }
    >
      <div className="space-y-6">
        {/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ */}
        <SystemInfo stateAnalysis={stateAnalysis} />

        {/* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ */}
        <UISettings />

        {/* –§—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞ */}
        <BotSettings />

        {/* –í—ã–±–æ—Ä —Ç–µ–º—ã */}
        <ThemeSelector />

        {/* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ */}
        <DataManagement />
      </div>
    </Modal>
  );
}
```


***

### 5.8.8 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç SystemInfo

```tsx
// src/components/Settings/SystemInfo.tsx
// –¶–ï–õ–¨: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

interface SystemInfoProps {
  stateAnalysis: any; // –ò–∑ ChatContext
}

export default function SystemInfo({ stateAnalysis }: SystemInfoProps) {
  if (!stateAnalysis) {
    return (
      <section>
        <h3 className="text-sm font-semibold text-gray-600 dark:text-gray-400 mb-3">
          üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ
        </h3>
        <div className="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
          <p className="text-sm text-gray-500">
            –î–∞–Ω–Ω—ã–µ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
          </p>
        </div>
      </section>
    );
  }

  return (
    <section>
      <h3 className="text-sm font-semibold text-gray-600 dark:text-gray-400 mb-3">
        üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ
      </h3>
      <div className="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3">
        <InfoRow
          label="–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ"
          value={translateState(stateAnalysis.primary_state)}
          icon={getStateEmoji(stateAnalysis.primary_state)}
        />
        <InfoRow
          label="–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å"
          value={`${(stateAnalysis.confidence * 100).toFixed(0)}%`}
        />
        <InfoRow
          label="–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–æ–Ω"
          value={stateAnalysis.emotional_tone || 'N/A'}
        />
        <InfoRow
          label="–ì–ª—É–±–∏–Ω–∞"
          value={stateAnalysis.depth || 'N/A'}
        />
        {stateAnalysis.recommended_mode && (
          <InfoRow
            label="–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–µ–∂–∏–º"
            value={stateAnalysis.recommended_mode}
          />
        )}
      </div>
    </section>
  );
}

function InfoRow({ label, value, icon }: { label: string; value: string; icon?: string }) {
  return (
    <div className="flex items-center justify-between">
      <span className="text-sm text-gray-600 dark:text-gray-400">
        {label}:
      </span>
      <span className="text-sm font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2">
        {icon && <span>{icon}</span>}
        {value}
      </span>
    </div>
  );
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ Header.tsx)
function getStateEmoji(state: string): string {
  const emojiMap: Record<string, string> = {
    curious: 'üòä',
    confused: 'üòï',
    overwhelmed: 'üò∞',
    seeking: 'üîç',
    reflecting: 'ü§î',
    resistant: 'üõ°Ô∏è',
    open: 'üåü',
    unaware: '‚ùì',
    ready: '‚úÖ',
    integrating: 'üß©',
  };
  return emojiMap[state.toLowerCase()] || 'üòä';
}

function translateState(state: string): string {
  const translations: Record<string, string> = {
    curious: '–õ—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ',
    confused: '–ó–∞–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ',
    overwhelmed: '–ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞',
    seeking: '–ü–æ–∏—Å–∫',
    reflecting: '–†–∞–∑–º—ã—à–ª–µ–Ω–∏–µ',
    resistant: '–°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ',
    open: '–û—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å',
    unaware: '–ù–µ–æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å',
    ready: '–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å',
    integrating: '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è',
  };
  return translations[state.toLowerCase()] || state;
}
```


***

### 5.8.9 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç UISettings

```tsx
// src/components/Settings/UISettings.tsx
// –¶–ï–õ–¨: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

import { useContext } from 'react';
import { SettingsContext } from '../../context/SettingsContext';
import Toggle from '../UI/Toggle';

export default function UISettings() {
  const { settings, updateSettings } = useContext(SettingsContext);

  return (
    <section>
      <h3 className="text-sm font-semibold text-gray-600 dark:text-gray-400 mb-3">
        üé® –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
      </h3>
      <div className="space-y-3">
        <SettingRow
          label="–ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —á–∞—Ç–∞"
          description="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –Ω–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º"
          checked={settings.autoScroll}
          onChange={(checked) => updateSettings({ autoScroll: checked })}
        />
        <SettingRow
          label="–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏"
          description="–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–æ–¥ –æ—Ç–≤–µ—Ç–∞–º–∏"
          checked={settings.showSources}
          onChange={(checked) => updateSettings({ showSources: checked })}
        />
        <SettingRow
          label="–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º"
          description="–£–º–µ–Ω—å—à–µ–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏"
          checked={settings.compactMode}
          onChange={(checked) => updateSettings({ compactMode: checked })}
        />
      </div>
    </section>
  );
}

function SettingRow({
  label,
  description,
  checked,
  onChange,
}: {
  label: string;
  description?: string;
  checked: boolean;
  onChange: (checked: boolean) => void;
}) {
  return (
    <div className="flex items-center justify-between py-2">
      <div className="flex-1">
        <p className="text-sm font-medium text-gray-900 dark:text-gray-100">
          {label}
        </p>
        {description && (
          <p className="text-xs text-gray-500 dark:text-gray-400 mt-0.5">
            {description}
          </p>
        )}
      </div>
      <Toggle checked={checked} onChange={onChange} />
    </div>
  );
}
```


***

### 5.8.10 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç BotSettings

```tsx
// src/components/Settings/BotSettings.tsx
// –¶–ï–õ–¨: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π –±–æ—Ç–∞

import { useContext } from 'react';
import { SettingsContext } from '../../context/SettingsContext';
import Toggle from '../UI/Toggle';

export default function BotSettings() {
  const { settings, updateSettings } = useContext(SettingsContext);

  return (
    <section>
      <h3 className="text-sm font-semibold text-gray-600 dark:text-gray-400 mb-3">
        üß† –§—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞
      </h3>
      <div className="space-y-3">
        <SettingRow
          label="–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"
          description="–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—É—Ç–∏ —Ä–∞–∑–≤–∏—Ç–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"
          checked={settings.includePathRecommendation}
          onChange={(checked) => updateSettings({ includePathRecommendation: checked })}
        />
        <SettingRow
          label="–ó–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å"
          description="–ë–æ—Ç –±—É–¥–µ—Ç —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å –æ—Ü–µ–Ω–∫—É –æ—Ç–≤–µ—Ç–æ–≤"
          checked={settings.includeFeedbackPrompt}
          onChange={(checked) => updateSettings({ includeFeedbackPrompt: checked })}
        />
        <SettingRow
          label="–ê–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–π"
          description="–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è"
          checked={settings.enableEmotionAnalysis}
          onChange={(checked) => updateSettings({ enableEmotionAnalysis: checked })}
        />
      </div>
    </section>
  );
}

function SettingRow({
  label,
  description,
  checked,
  onChange,
}: {
  label: string;
  description?: string;
  checked: boolean;
  onChange: (checked: boolean) => void;
}) {
  return (
    <div className="flex items-center justify-between py-2">
      <div className="flex-1">
        <p className="text-sm font-medium text-gray-900 dark:text-gray-100">
          {label}
        </p>
        {description && (
          <p className="text-xs text-gray-500 dark:text-gray-400 mt-0.5">
            {description}
          </p>
        )}
      </div>
      <Toggle checked={checked} onChange={onChange} />
    </div>
  );
}
```


***

### 5.8.11 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ThemeSelector

```tsx
// src/components/Settings/ThemeSelector.tsx
// –¶–ï–õ–¨: –í—ã–±–æ—Ä —Ç–µ–º—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è

import { useContext } from 'react';
import { ThemeContext } from '../../context/ThemeContext';

export default function ThemeSelector() {
  const { theme, setTheme } = useContext(ThemeContext);

  return (
    <section>
      <h3 className="text-sm font-semibold text-gray-600 dark:text-gray-400 mb-3">
        üåô –¢–µ–º–∞
      </h3>
      <div className="grid grid-cols-3 gap-2">
        <ThemeButton
          label="–°–≤–µ—Ç–ª–∞—è"
          icon="‚òÄÔ∏è"
          active={theme === 'light'}
          onClick={() => setTheme('light')}
        />
        <ThemeButton
          label="–¢—ë–º–Ω–∞—è"
          icon="üåô"
          active={theme === 'dark'}
          onClick={() => setTheme('dark')}
        />
        <ThemeButton
          label="–°–∏—Å—Ç–µ–º–Ω–∞—è"
          icon="üíª"
          active={theme === 'system'}
          onClick={() => setTheme('system')}
        />
      </div>
    </section>
  );
}

function ThemeButton({
  label,
  icon,
  active,
  onClick,
}: {
  label: string;
  icon: string;
  active: boolean;
  onClick: () => void;
}) {
  return (
    <button
      onClick={onClick}
      className={`
        flex flex-col items-center justify-center p-3 rounded-lg border-2
        transition-all duration-200
        ${
          active
            ? 'border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20'
            : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'
        }
      `}
    >
      <span className="text-2xl mb-1">{icon}</span>
      <span className="text-xs font-medium text-gray-700 dark:text-gray-300">
        {label}
      </span>
    </button>
  );
}
```


***

### 5.8.12 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç DataManagement

```tsx
// src/components/Settings/DataManagement.tsx
// –¶–ï–õ–¨: –≠–∫—Å–ø–æ—Ä—Ç –∏ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

import { useContext, useState } from 'react';
import { ChatContext } from '../../context/ChatContext';
import { UserContext } from '../../context/UserContext';
import Button from '../UI/Button';

export default function DataManagement() {
  const { chats, messages } = useContext(ChatContext);
  const { userId } = useContext(UserContext);
  const [exporting, setExporting] = useState(false);

  const handleExport = async () => {
    setExporting(true);
    try {
      // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ JSON —Å–æ –≤—Å–µ–º–∏ —á–∞—Ç–∞–º–∏
      const exportData = {
        user_id: userId,
        export_date: new Date().toISOString(),
        chats: chats,
        total_messages: messages.length,
      };

      // –°–æ–∑–¥–∞–Ω–∏–µ blob –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ
      const blob = new Blob([JSON.stringify(exportData, null, 2)], {
        type: 'application/json',
      });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `bot-psychologist-export-${Date.now()}.json`;
      link.click();
      URL.revokeObjectURL(url);
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞:', error);
      alert('–ù–µ —É–¥–∞–ª–æ—Å—å —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ');
    } finally {
      setExporting(false);
    }
  };

  const handleDeleteAll = async () => {
    const confirmed = confirm(
      '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –í–°–ï —á–∞—Ç—ã? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ!'
    );
    if (!confirmed) return;

    const doubleConfirm = confirm('–¢–æ—á–Ω–æ —É–≤–µ—Ä–µ–Ω—ã? –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã –Ω–∞–≤—Å–µ–≥–¥–∞.');
    if (!doubleConfirm) return;

    try {
      // –í—ã–∑–æ–≤ API –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —á–∞—Ç–æ–≤
      // await chatService.deleteAllChats(userId);
      alert('–í—Å–µ —á–∞—Ç—ã —É–¥–∞–ª–µ–Ω—ã');
      window.location.reload(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:', error);
      alert('–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ');
    }
  };

  return (
    <section>
      <h3 className="text-sm font-semibold text-gray-600 dark:text-gray-400 mb-3">
        ‚ö†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏
      </h3>
      <div className="space-y-3">
        <Button
          onClick={handleExport}
          disabled={exporting || chats.length === 0}
          variant="outline"
          className="w-full"
        >
          {exporting ? 'üì§ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è...' : 'üì§ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é'}
        </Button>
        <Button
          onClick={handleDeleteAll}
          variant="danger"
          className="w-full"
          disabled={chats.length === 0}
        >
          üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —á–∞—Ç—ã
        </Button>
        <p className="text-xs text-gray-500 dark:text-gray-400">
          –£ –≤–∞—Å {chats.length} {chats.length === 1 ? '—á–∞—Ç' : '—á–∞—Ç–æ–≤'} —Å {messages.length}{' '}
          {messages.length === 1 ? '—Å–æ–æ–±—â–µ–Ω–∏–µ–º' : '—Å–æ–æ–±—â–µ–Ω–∏—è–º–∏'}
        </p>
      </div>
    </section>
  );
}
```


***

### 5.8.13 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ App.tsx

```tsx
// src/App.tsx
// –û–ë–ù–û–í–õ–ï–ù–û: –î–æ–±–∞–≤–ª–µ–Ω SettingsProvider –∏ SettingsModal

import { ChatProvider } from './context/ChatContext';
import { ThemeProvider } from './context/ThemeContext';
import { UserProvider } from './context/UserContext';
import { SettingsProvider } from './context/SettingsContext'; // –ù–û–í–û–ï
import MainLayout from './components/Layout/MainLayout';
import SettingsModal from './components/Settings/SettingsModal'; // –ù–û–í–û–ï

export default function App() {
  return (
    <ThemeProvider>
      <UserProvider>
        <SettingsProvider> {/* –ù–û–í–û–ï */}
          <ChatProvider>
            <MainLayout />
            <SettingsModal /> {/* –ù–û–í–û–ï */}
          </ChatProvider>
        </SettingsProvider>
      </UserProvider>
    </ThemeProvider>
  );
}
```


***

## –û–ë–ù–û–í–õ–ï–ù–ò–ï –†–ê–ó–î–ï–õ–ê 11: –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –î–æ–±–∞–≤–∏—Ç—å –≤ –î–µ–Ω—å 1:

**–î–µ–Ω—å 1: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (6-8 —á–∞—Å–æ–≤)**

- ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ç–∏–ø—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ (settings.ts)
- ‚úÖ –°–æ–∑–¥–∞—Ç—å SettingsContext
- ‚úÖ –°–æ–∑–¥–∞—Ç—å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Toggle, Badge, Modal)
- ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å Header —Å –∫–Ω–æ–ø–∫–æ–π Settings –∏ State Badge

**–î–µ–Ω—å 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è API (6-8 —á–∞—Å–æ–≤)**

- ‚úÖ –°–æ–∑–¥–∞—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Settings/*
- ‚úÖ –ü–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫ ChatContext (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å settings –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ)
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å state_analysis –≤ ChatContext

**–î–µ–Ω—å 3: –ü–æ–ª–∏—Ä–æ–≤–∫–∞ UI (6-8 —á–∞—Å–æ–≤)**

- ‚úÖ –ê–Ω–∏–º–∞—Ü–∏–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
- ‚úÖ –§—É–Ω–∫—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

***

## –ö–†–ò–¢–ï–†–ò–ò –ü–†–ò–ï–ú–ö–ò –î–õ–Ø SETTINGS

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- ‚úÖ –ö–Ω–æ–ø–∫–∞ ‚öôÔ∏è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ Badge —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ Header
- ‚úÖ –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ badge –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –¥–µ—Ç–∞–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ –í—Å–µ toggle –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ (autoScroll, showSources –∏ —Ç.–¥.)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë" –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç DEFAULT_SETTINGS
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç —Å–æ–∑–¥–∞—ë—Ç JSON —Ñ–∞–π–ª —Å –∏—Å—Ç–æ—Ä–∏–µ–π
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —á–∞—Ç–æ–≤ —Ç—Ä–µ–±—É–µ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è


### UI/UX —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ Escape
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –µ–≥–æ
- ‚úÖ –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö)
- ‚úÖ –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º Settings

***

## –ò–¢–û–ì–û

–¢–µ–ø–µ—Ä—å –≤–∞—à –ü–†–î —Å–æ–¥–µ—Ä–∂–∏—Ç:

1. ‚úÖ **–ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ user_level** –∏–∑ UI
2. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** (State Classification)
3. ‚úÖ **Badge –≤ Header** —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
4. ‚úÖ **–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ Settings** —Å 5 —Å–µ–∫—Ü–∏—è–º–∏:
    - üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ (read-only)
    - üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    - üß† –§—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞
    - üåô –í—ã–±–æ—Ä —Ç–µ–º—ã
    - ‚ö†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏
5. ‚úÖ **–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ** –¥–ª—è Cursor AI
6. ‚úÖ **–î–µ—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** –≤ –∫–∞–∂–¥–æ–º —Ñ–∞–π–ª–µ

–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ Cursor AI! üöÄ

