# Task ID: 11
# Title: Phase 2.4: Создание answer_sag_aware.py
# Status: pending
# Dependencies: 9, 10
# Priority: high
# Description: Новая функция answer_question_sag_aware для ответов с учетом SAG v2.0. Интеграция UserLevelAdapter и SemanticAnalyzer. 6 этапов обработки запроса.
# Details:
Файл: bot_agent/answer_sag_aware.py. Функция answer_question_sag_aware(query, user_level, top_k, debug). Этапы: 1) Инициализация компонентов, 2) Поиск блоков, 3) Адаптация по уровню, 4) Семантический анализ, 5) Формирование ответа через LLM, 6) Форматирование вывода. Возвращает расширенный Dict с concepts, relations, metadata.

# Test Strategy:


# Subtasks:
## 1. 2.4.1 Создать структуру answer_question_sag_aware с импортами [pending]
### Dependencies: None
### Description: Импорты: data_loader, retriever, LLMAnswerer, UserLevelAdapter, SemanticAnalyzer, config
### Details:


## 2. 2.4.2 Этап 1-2: Инициализация компонентов и поиск блоков [pending]
### Dependencies: None
### Description: Загрузка данных, создание level_adapter и semantic_analyzer, поиск через retriever
### Details:


## 3. 2.4.3 Этап 3-4: Адаптация по уровню и семантический анализ [pending]
### Dependencies: None
### Description: filter_blocks_by_level, analyze_relations для извлечения концептов
### Details:


## 4. 2.4.4 Этап 5: Формирование ответа через LLM [pending]
### Dependencies: None
### Description: adapted_system_prompt, расширенный контекст с концептами, generate_answer
### Details:


## 5. 2.4.5 Этап 6: Форматирование вывода [pending]
### Dependencies: None
### Description: Возврат Dict с status, answer, sources, concepts, relations, metadata, debug
### Details:


