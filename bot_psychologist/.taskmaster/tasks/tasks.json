{
  "master": {
    "tasks": [
      {
        "id": 1,
        "title": "Phase 1.1: Project Initialization",
        "description": "Create folder structure and dependencies",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "1.1.1 Create bot_agent folder structure",
            "description": "Create folders: bot_agent/, logs/bot_agent/",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 1
          },
          {
            "id": 2,
            "title": "1.1.2 Create requirements_bot.txt",
            "description": "Add dependencies: openai, scikit-learn, numpy, python-dotenv",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 1
          },
          {
            "id": 3,
            "title": "1.1.3 Setup .env configuration",
            "description": "Configure OPENAI_API_KEY, PRIMARY_MODEL, DATA_ROOT",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 1
          },
          {
            "id": 4,
            "title": "1.1.4 Create __init__.py for bot_agent",
            "description": "Initialize package with logging and main imports",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 1
          }
        ]
      },
      {
        "id": 2,
        "title": "Phase 1.2: Create config.py",
        "description": "Configuration module with paths, LLM parameters, search settings, caching",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          1
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "1.2.1 Define PROJECT_ROOT and DATA_ROOT paths",
            "description": "Configure base paths for data and project root",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 2
          },
          {
            "id": 2,
            "title": "1.2.2 Configure search parameters",
            "description": "TOP_K_BLOCKS, MIN_RELEVANCE_SCORE settings",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 2
          },
          {
            "id": 3,
            "title": "1.2.3 Configure LLM parameters",
            "description": "LLM_MODEL, TEMPERATURE, MAX_TOKENS, OPENAI_API_KEY",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 2
          },
          {
            "id": 4,
            "title": "1.2.4 Add validation method",
            "description": "Config.validate() to check required settings",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 2
          }
        ]
      },
      {
        "id": 3,
        "title": "Phase 1.3: Create data_loader.py",
        "description": "Data loader for SAG v2.0 JSON files with Block and Document dataclasses",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          2
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "1.3.1 Create Block dataclass",
            "description": "Dataclass with fields: block_id, video_id, start, end, title, summary, content, keywords, youtube_link",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 3
          },
          {
            "id": 2,
            "title": "1.3.2 Create Document dataclass",
            "description": "Dataclass with fields: video_id, source_url, title, blocks, metadata",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 3
          },
          {
            "id": 3,
            "title": "1.3.3 Implement DataLoader class",
            "description": "Class with methods: load_all_data, get_all_blocks, get_document_by_video_id, get_block_by_id",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 3
          },
          {
            "id": 4,
            "title": "1.3.4 Create global data_loader singleton",
            "description": "Singleton instance for caching loaded data across requests",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 3
          }
        ]
      },
      {
        "id": 4,
        "title": "Phase 1.4: Create retriever.py",
        "description": "Simple TF-IDF retriever for semantic block search with cosine similarity",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          3
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "1.4.1 Build TF-IDF index",
            "description": "TfidfVectorizer with char n-grams for Russian text",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 4
          },
          {
            "id": 2,
            "title": "1.4.2 Implement retrieve method",
            "description": "Cosine similarity search returning top-k blocks with scores",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 4
          },
          {
            "id": 3,
            "title": "1.4.3 Add relevance threshold filter",
            "description": "Filter results by MIN_RELEVANCE_SCORE from config",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 4
          }
        ]
      },
      {
        "id": 5,
        "title": "Phase 1.5: Create llm_answerer.py",
        "description": "LLM answerer module for generating responses via OpenAI API with system prompt",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          4
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "1.5.1 Create system prompt",
            "description": "Psychologist bot persona: calm, supportive, no medical diagnoses",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 5
          },
          {
            "id": 2,
            "title": "1.5.2 Build context prompt",
            "description": "Format blocks with title, summary, content, youtube_link, timecodes",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 5
          },
          {
            "id": 3,
            "title": "1.5.3 Integrate OpenAI API",
            "description": "Chat completion with temperature, max_tokens, error handling",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 5
          }
        ]
      },
      {
        "id": 6,
        "title": "Phase 1.6: Create answer_basic.py",
        "description": "Main QA function answer_question_basic combining retriever and LLM answerer",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          5
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "1.6.1 Implement answer_question_basic function",
            "description": "Main function: load data -> retrieve blocks -> generate answer -> return result",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 6
          },
          {
            "id": 2,
            "title": "1.6.2 Create simple ask() interface",
            "description": "Wrapper function returning only text answer for quick usage",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 6
          },
          {
            "id": 3,
            "title": "1.6.3 Add error handling and debug info",
            "description": "Handle no_data, no_blocks, LLM errors; optional debug output",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 6
          }
        ]
      },
      {
        "id": 7,
        "title": "Phase 1.7: Create test_phase1.py",
        "description": "Test script to verify Phase 1 QA bot functionality with sample questions",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          6
        ],
        "priority": "medium",
        "subtasks": [
          {
            "id": 1,
            "title": "1.7.1 Create test questions",
            "description": "Sample questions about awareness, practices, transformation",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 7
          },
          {
            "id": 2,
            "title": "1.7.2 Run tests and verify output",
            "description": "Check answer quality, sources, youtube links with timecodes",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 7
          },
          {
            "id": 3,
            "title": "1.7.3 Validate logging",
            "description": "Verify logs are written to logs/bot_agent/bot_agent.log",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 7
          }
        ]
      },
      {
        "id": 8,
        "title": "Phase 2.1: Расширение data_loader.py (SAG v2.0)",
        "description": "Обновить data_loader.py — добавить поддержку новых полей SAG v2.0: block_type, emotional_tone, conceptual_depth, complexity_score, graph_entities. Обновить класс Block и метод _load_single_document.",
        "details": "Файл: bot_agent/data_loader.py. Добавить поля: block_type (monologue/dialogue/practice/theory), emotional_tone (contemplative/explanatory/intense/light), conceptual_depth (low/medium/high), complexity_score (1.0-10.0), graph_entities (List[str] до 30 сущностей). Обновить __post_init__ и парсинг JSON.",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          7
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "2.1.1 Добавить новые поля SAG v2.0 в Block dataclass",
            "description": "Добавить поля: block_type, emotional_tone, conceptual_depth, complexity_score, graph_entities",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 8
          },
          {
            "id": 2,
            "title": "2.1.2 Добавить __post_init__ для инициализации опциональных полей",
            "description": "Инициализация graph_entities как пустой список если None",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 8
          },
          {
            "id": 3,
            "title": "2.1.3 Обновить _load_single_document для парсинга SAG v2.0 полей",
            "description": "Парсинг block_type, emotional_tone, conceptual_depth, complexity_score, graph_entities из JSON",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 8
          },
          {
            "id": 4,
            "title": "2.1.4 Добавить метод get_preview в Block",
            "description": "Метод для получения краткого содержания блока с ограничением длины",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 8
          }
        ]
      },
      {
        "id": 9,
        "title": "Phase 2.2: Создание user_level_adapter.py",
        "description": "Новый модуль для адаптации ответов под уровень пользователя (beginner/intermediate/advanced). Фильтрация блоков по сложности, адаптация системных промптов, извлечение ключевых концептов.",
        "details": "Файл: bot_agent/user_level_adapter.py. Компоненты: UserLevel enum, UserLevelAdapter class с методами filter_blocks_by_level, adapt_system_prompt, extract_key_concepts, get_answer_length_guidance, format_concepts_for_output.",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          8
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "2.2.1 Создать UserLevel enum",
            "description": "Enum: BEGINNER, INTERMEDIATE, ADVANCED со строковыми значениями",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 9
          },
          {
            "id": 2,
            "title": "2.2.2 Создать UserLevelAdapter class с конструктором",
            "description": "Конструктор принимает user_level строку и конвертирует в UserLevel enum",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 9
          },
          {
            "id": 3,
            "title": "2.2.3 Реализовать filter_blocks_by_level",
            "description": "Фильтрация блоков по complexity_score и conceptual_depth в зависимости от уровня",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 9
          },
          {
            "id": 4,
            "title": "2.2.4 Реализовать adapt_system_prompt",
            "description": "Добавление инструкций для LLM в зависимости от уровня пользователя",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 9
          },
          {
            "id": 5,
            "title": "2.2.5 Реализовать вспомогательные методы",
            "description": "extract_key_concepts, get_answer_length_guidance, format_concepts_for_output",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 9
          }
        ]
      },
      {
        "id": 10,
        "title": "Phase 2.3: Создание semantic_analyzer.py",
        "description": "Модуль для анализа семантических отношений между концептами в найденных блоках. Извлечение primary_concepts, related_concepts, conceptual_links.",
        "details": "Файл: bot_agent/semantic_analyzer.py. Класс SemanticAnalyzer с методами: analyze_relations (возвращает structured dict), _find_related_concepts, _extract_conceptual_links, _generate_analysis_summary.",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          8
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "2.3.1 Создать SemanticAnalyzer class",
            "description": "Базовый класс для анализа семантических отношений между концептами",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 10
          },
          {
            "id": 2,
            "title": "2.3.2 Реализовать analyze_relations",
            "description": "Возвращает Dict с primary_concepts, related_concepts, conceptual_links, analysis_summary",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 10
          },
          {
            "id": 3,
            "title": "2.3.3 Реализовать _find_related_concepts и _extract_conceptual_links",
            "description": "Поиск связей между концептами через совместное появление в блоках",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 10
          },
          {
            "id": 4,
            "title": "2.3.4 Реализовать _generate_analysis_summary",
            "description": "Генерация текстового резюме семантического анализа",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 10
          }
        ]
      },
      {
        "id": 11,
        "title": "Phase 2.4: Создание answer_sag_aware.py",
        "description": "Новая функция answer_question_sag_aware для ответов с учетом SAG v2.0. Интеграция UserLevelAdapter и SemanticAnalyzer. 6 этапов обработки запроса.",
        "details": "Файл: bot_agent/answer_sag_aware.py. Функция answer_question_sag_aware(query, user_level, top_k, debug). Этапы: 1) Инициализация компонентов, 2) Поиск блоков, 3) Адаптация по уровню, 4) Семантический анализ, 5) Формирование ответа через LLM, 6) Форматирование вывода. Возвращает расширенный Dict с concepts, relations, metadata.",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          9,
          10
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "2.4.1 Создать структуру answer_question_sag_aware с импортами",
            "description": "Импорты: data_loader, retriever, LLMAnswerer, UserLevelAdapter, SemanticAnalyzer, config",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11
          },
          {
            "id": 2,
            "title": "2.4.2 Этап 1-2: Инициализация компонентов и поиск блоков",
            "description": "Загрузка данных, создание level_adapter и semantic_analyzer, поиск через retriever",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11
          },
          {
            "id": 3,
            "title": "2.4.3 Этап 3-4: Адаптация по уровню и семантический анализ",
            "description": "filter_blocks_by_level, analyze_relations для извлечения концептов",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11
          },
          {
            "id": 4,
            "title": "2.4.4 Этап 5: Формирование ответа через LLM",
            "description": "adapted_system_prompt, расширенный контекст с концептами, generate_answer",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11
          },
          {
            "id": 5,
            "title": "2.4.5 Этап 6: Форматирование вывода",
            "description": "Возврат Dict с status, answer, sources, concepts, relations, metadata, debug",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 11
          }
        ]
      },
      {
        "id": 12,
        "title": "Phase 2.5: Обновление __init__.py",
        "description": "Обновить bot_agent/__init__.py — добавить импорт Phase 2 модулей и обновить __all__.",
        "details": "Файл: bot_agent/__init__.py. Добавить: from answer_sag_aware import answer_question_sag_aware. Обновить __all__ = [..., 'answer_question_sag_aware']. Обновить лог инициализации.",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          11
        ],
        "priority": "medium",
        "subtasks": [
          {
            "id": 1,
            "title": "2.5.1 Добавить импорт answer_sag_aware",
            "description": "from answer_sag_aware import answer_question_sag_aware",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 12
          },
          {
            "id": 2,
            "title": "2.5.2 Обновить __all__ и лог инициализации",
            "description": "Добавить answer_question_sag_aware в __all__, обновить лог: Phase 1 + Phase 2",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 12
          }
        ]
      },
      {
        "id": 13,
        "title": "Phase 2.6: Создание test_phase2.py",
        "description": "Тестовый скрипт для проверки Phase 2 функциональности с разными уровнями пользователя и тестовыми вопросами.",
        "details": "Файл: test_phase2.py. Тестовые комбинации: вопрос + уровень (beginner/intermediate/advanced). Проверка: status, processing_time, answer, concepts, relations, sources. Вывод debug информации.",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          12
        ],
        "priority": "medium",
        "subtasks": [
          {
            "id": 1,
            "title": "2.6.1 Создать test_phase2.py с тестовыми кейсами",
            "description": "Тестовые комбинации: (вопрос, уровень) для beginner/intermediate/advanced",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 13
          },
          {
            "id": 2,
            "title": "2.6.2 Реализовать вывод результатов",
            "description": "Вывод status, processing_time, answer, concepts, relations, sources, debug",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 13
          },
          {
            "id": 3,
            "title": "2.6.3 Запуск и верификация тестов",
            "description": "Выполнить python test_phase2.py и проверить корректность результатов",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 13
          }
        ]
      },
      {
        "id": 14,
        "title": "Phase 2.7: Финальная проверка и валидация Phase 2",
        "description": "Финальная проверка всех компонентов Phase 2 по чек-листу. Валидация результатов и готовности к Phase 3.",
        "details": "Чек-лист: data_loader.py обновлён, user_level_adapter.py создан, semantic_analyzer.py создан, answer_sag_aware.py создан, __init__.py обновлён, test_phase2.py создан и проходит, ответы адаптируются под уровень, концепты извлекаются корректно.",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          13
        ],
        "priority": "medium",
        "subtasks": [
          {
            "id": 1,
            "title": "2.7.1 Пройти чек-лист Phase 2",
            "description": "Проверить: data_loader.py обновлён, все модули созданы, __init__.py обновлён, тесты проходят",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 14
          },
          {
            "id": 2,
            "title": "2.7.2 Валидация результатов Phase 2",
            "description": "Ответы адаптируются под уровень, концепты извлекаются, готовность к Phase 3",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 14
          }
        ]
      },
      {
        "id": 15,
        "title": "Phase 3.1: Создание graph_client.py — клиент Knowledge Graph",
        "description": "Модуль для работы с Knowledge Graph. Содержит классы GraphNode, GraphEdge, KnowledgeGraphClient. Загрузка графов из JSON, поиск узлов и связей, BFS-навигация.",
        "details": "Файл: bot_agent/graph_client.py. Типы узлов: CONCEPT, PRACTICE, TECHNIQUE, EXERCISE, PATTERN, PROCESS_STAGE. Типы связей: IS_PRACTICE_FOR, IS_TECHNIQUE_FOR, ENABLES, REQUIRES, IS_PART_OF, HAS_PART, RELATED_TO. Источник данных: *.knowledge_graph.json или поле knowledge_graph внутри *.for_vector.json. Глобальный синглтон graph_client.",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          14
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "3.1.1 Создать класс GraphNode",
            "description": "Класс узла Knowledge Graph: node_id, name, node_type (CONCEPT, PRACTICE, TECHNIQUE, EXERCISE, PATTERN, PROCESS_STAGE), metadata",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 15
          },
          {
            "id": 2,
            "title": "3.1.2 Создать класс GraphEdge",
            "description": "Класс связи: from_id, to_id, from_name, to_name, edge_type, explanation, confidence (0.0-1.0), metadata",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 15
          },
          {
            "id": 3,
            "title": "3.1.3 Создать KnowledgeGraphClient с загрузкой графов",
            "description": "Методы: load_graphs_from_all_documents, _find_graph_file_for_doc, _load_single_graph. Источник: *.knowledge_graph.json или поле knowledge_graph в for_vector.json",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 15
          },
          {
            "id": 4,
            "title": "3.1.4 Реализовать методы поиска узлов",
            "description": "Методы: find_node (по имени, case-insensitive), find_node_by_id, node_by_name индекс для быстрого поиска",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 15
          },
          {
            "id": 5,
            "title": "3.1.5 Реализовать методы поиска связей",
            "description": "Методы: get_related (outgoing/incoming/both), adjacency и reverse_adjacency индексы, фильтрация по edge_types",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 15
          },
          {
            "id": 6,
            "title": "3.1.6 Реализовать навигационные методы",
            "description": "Методы: get_practices_for_concept, get_chain (BFS), get_prerequisites_for_concept, get_concept_hierarchy, get_statistics",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 15
          },
          {
            "id": 7,
            "title": "3.1.7 Создать глобальный синглтон graph_client",
            "description": "Инстанс KnowledgeGraphClient для использования во всём проекте с lazy-loading",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 15
          }
        ]
      },
      {
        "id": 16,
        "title": "Phase 3.2: Создание practices_recommender.py — рекомендатор практик",
        "description": "Модуль для рекомендации практик, техник и упражнений на основе Knowledge Graph. Построение путей обучения между концептами.",
        "details": "Файл: bot_agent/practices_recommender.py. Класс PracticesRecommender с методами: suggest_practices_for_concept (поиск практик через граф + привязка к блокам), get_learning_path (BFS от start_concept к target_concept через граф), get_practice_details (детали практики из блоков). Глобальный синглтон practices_recommender.",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          15
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "3.2.1 Создать класс PracticesRecommender",
            "description": "Базовый класс с инициализацией graph_client.load_graphs_from_all_documents()",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 16
          },
          {
            "id": 2,
            "title": "3.2.2 Реализовать suggest_practices_for_concept",
            "description": "Поиск практик через граф для концепта, привязка к блокам по graph_entities, возврат Dict с practice_name, type, confidence, source_blocks",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 16
          },
          {
            "id": 3,
            "title": "3.2.3 Реализовать get_learning_path",
            "description": "Построение пути обучения от start_concept к target_concept через BFS или на основе prerequisites",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 16
          },
          {
            "id": 4,
            "title": "3.2.4 Реализовать get_practice_details",
            "description": "Получение полной информации о практике: description, full_content, source_blocks из блоков по graph_entities",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 16
          },
          {
            "id": 5,
            "title": "3.2.5 Создать глобальный синглтон practices_recommender",
            "description": "Инстанс PracticesRecommender для использования в answer_graph_powered",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 16
          }
        ]
      },
      {
        "id": 17,
        "title": "Phase 3.3: Создание answer_graph_powered.py — Graph-Powered QA",
        "description": "Функция answer_question_graph_powered для ответов с полной поддержкой Knowledge Graph. 8 этапов обработки: от базового поиска до формирования ответа с практиками и цепочками.",
        "details": "Файл: bot_agent/answer_graph_powered.py. Этапы: 1) Инициализация, 2) Поиск блоков, 3) Загрузка Knowledge Graph, 4) Анализ концептов через граф, 5) Формирование ответа, 6) Рекомендация практик, 7) Анализ цепочек, 8) Форматирование результата. Возвращает расширенный Dict: status, answer, sources, concepts, relations, practices, concept_hierarchy, learning_path, metadata.",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          15,
          16
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "3.3.1 Создать структуру answer_question_graph_powered с импортами",
            "description": "Импорты: data_loader, retriever, LLMAnswerer, UserLevelAdapter, SemanticAnalyzer, graph_client, practices_recommender, config",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 17
          },
          {
            "id": 2,
            "title": "3.3.2 Этапы 1-2: Базовая обработка и поиск блоков",
            "description": "Инициализация компонентов (как в Phase 2), поиск релевантных блоков через retriever",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 17
          },
          {
            "id": 3,
            "title": "3.3.3 Этапы 3-4: Загрузка Knowledge Graph и анализ концептов",
            "description": "Загрузка графов, получение иерархии концептов через get_concept_hierarchy для primary_concepts",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 17
          },
          {
            "id": 4,
            "title": "3.3.4 Этап 5: Формирование ответа через LLM",
            "description": "Обогащённый контекст с информацией из графа (структура концептов), генерация ответа через LLMAnswerer",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 17
          },
          {
            "id": 5,
            "title": "3.3.5 Этапы 6-7: Рекомендация практик и анализ цепочек",
            "description": "suggest_practices_for_concept для main_concept, get_learning_path между primary_concepts",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 17
          },
          {
            "id": 6,
            "title": "3.3.6 Этап 8: Форматирование результата",
            "description": "Возврат Dict: status, answer, sources, concepts, relations, practices, concept_hierarchy, learning_path, metadata, debug",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 17
          }
        ]
      },
      {
        "id": 18,
        "title": "Phase 3.4: Обновление __init__.py для Phase 3",
        "description": "Обновить bot_agent/__init__.py — добавить импорт Phase 3 модулей и обновить __all__.",
        "details": "Файл: bot_agent/__init__.py. Добавить: from answer_graph_powered import answer_question_graph_powered. Обновить __all__ с новыми экспортами. Обновить лог инициализации: Phase 1 + Phase 2 + Phase 3.",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          17
        ],
        "priority": "medium",
        "subtasks": [
          {
            "id": 1,
            "title": "3.4.1 Добавить импорт answer_graph_powered",
            "description": "from answer_graph_powered import answer_question_graph_powered",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 18
          },
          {
            "id": 2,
            "title": "3.4.2 Обновить __all__ и лог инициализации",
            "description": "Добавить answer_question_graph_powered в __all__, обновить лог: Phase 1 + Phase 2 + Phase 3",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 18
          }
        ]
      },
      {
        "id": 19,
        "title": "Phase 3.5: Создание test_phase3.py",
        "description": "Тестовый скрипт для проверки Phase 3 функциональности с разными уровнями пользователей, проверкой практик, цепочек и иерархии концептов.",
        "details": "Файл: test_phase3.py. Тестовые кейсы: (вопрос, уровень, with_practices, with_chain). Проверка: status, processing_time, answer, concepts, practices, learning_path, concept_hierarchy. Debug-вывод с graph_stats.",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          18
        ],
        "priority": "medium",
        "subtasks": [
          {
            "id": 1,
            "title": "3.5.1 Создать test_phase3.py с тестовыми кейсами",
            "description": "Тестовые комбинации: (вопрос, уровень, with_practices, with_chain) для beginner/intermediate/advanced",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 19
          },
          {
            "id": 2,
            "title": "3.5.2 Реализовать вывод результатов Phase 3",
            "description": "Вывод: status, processing_time, answer, concepts, practices, learning_path, concept_hierarchy, debug (graph_stats)",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 19
          },
          {
            "id": 3,
            "title": "3.5.3 Запуск и верификация тестов Phase 3",
            "description": "Выполнить python test_phase3.py, проверить: графы загружаются, практики рекомендуются, цепочки строятся, иерархия отображается",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 19
          }
        ]
      },
      {
        "id": 20,
        "title": "Phase 3.6: Финальная проверка и валидация Phase 3",
        "description": "Финальная проверка всех компонентов Phase 3 по чек-листу. Валидация загрузки графов, поиска практик, построения цепочек и иерархии концептов.",
        "details": "Чек-лист: graph_client.py создан и загружает графы, practices_recommender.py создан и находит практики, answer_graph_powered.py создан и работает, __init__.py обновлён, test_phase3.py создан и проходит, графы загружаются корректно, практики рекомендуются, цепочки связей строятся, иерархия концептов отображается.",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          19
        ],
        "priority": "medium",
        "subtasks": [
          {
            "id": 1,
            "title": "3.6.1 Пройти чек-лист Phase 3",
            "description": "Проверить: graph_client.py создан, practices_recommender.py создан, answer_graph_powered.py создан, __init__.py обновлён, test_phase3.py создан и проходит",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 20
          },
          {
            "id": 2,
            "title": "3.6.2 Валидация результатов Phase 3",
            "description": "Графы успешно загружаются, практики находятся и рекомендуются, цепочки связей строятся, иерархия концептов отображается правильно",
            "details": "",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 20
          }
        ]
      }
    ],
    "metadata": {
      "created": "2025-12-19T04:02:29.457Z",
      "updated": "2025-12-19T06:47:06.033Z",
      "description": "Tasks for master context"
    }
  }
}