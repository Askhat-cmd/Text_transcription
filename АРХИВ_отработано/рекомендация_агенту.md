

# üìä –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –ü–†–û–ï–ö–¢–ê

## üîç –ß—Ç–æ –£–ñ–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### ‚úÖ –≠–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä—ã (–≤—Å–µ –≤ `text_processor/extractors/`)

1. **SafetyInformationExtractor** ‚úÖ - –†–ê–ë–û–¢–ê–ï–¢
2. **CausalChainExtractor** ‚úÖ - –†–ê–ë–û–¢–ê–ï–¢
3. **ConceptHierarchyExtractor** ‚úÖ - –†–ê–ë–û–¢–ê–ï–¢
4. **CaseStudyExtractor** ‚úÖ - –†–ê–ë–û–¢–ê–ï–¢
5. **PrerequisiteExtractor** ‚úÖ - –†–ê–ë–û–¢–ê–ï–¢
6. **NeurostalkingPatternExtractor** ‚úÖ - –†–ê–ë–û–¢–ê–ï–¢

### ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä

**`sarsekenov_processor.py`** (172KB) - –ú–û–©–ù–´–ô –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π:

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –í–°–ï 6 —ç–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä–æ–≤
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç SAG v2.0 —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç Knowledge Graph (442 —É–∑–ª–∞ + 259 —Å–≤—è–∑–µ–π)
- ‚úÖ –ò–∑–≤–ª–µ–∫–∞–µ—Ç safety, practices, hierarchy, chains
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `.for_vector.json` –∏ `.for_review.md`


## ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

**–≠–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä—ã –í–´–ó–´–í–ê–Æ–¢–°–Ø, –Ω–æ –¥–∞–Ω–Ω—ã–µ –ù–ï –ó–ê–ü–û–õ–ù–Ø–Æ–¢–°–Ø –ø—Ä–∞–≤–∏–ª—å–Ω–æ!**

### –ü—Ä–æ–±–ª–µ–º–∞ –≤ –∫–æ–¥–µ (—Å—Ç—Ä–æ–∫–∏ 367-416):

```python
# –®–ê–ì 2: –ò–ó–í–õ–ï–ß–ï–ù–ò–ï (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
safety_result = self.safety_extractor.extract(text)  # ‚ùå –ù–ï–í–ï–†–ù–û!
practices_result = self.practice_extractor.extract(text)  # ‚ùå –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢!
```

**–ß—Ç–æ –Ω–µ —Ç–∞–∫:**

1. **SafetyExtractor** –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `(block_content, practice_or_concept_name)`, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ `text`
2. **PracticeExtractor** –í–û–û–ë–©–ï –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢ –≤ –ø—Ä–æ–µ–∫—Ç–µ
3. –î–∞–Ω–Ω—ã–µ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –ù–ê –£–†–û–í–ù–ï –ë–õ–û–ö–û–í (—Å—Ç—Ä–æ–∫–∏ 598-696), –Ω–æ –Ω–µ –∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞

## üéØ –†–ï–®–ï–ù–ò–ï (–¥–ª—è Cursor AI)

–í–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤, –Ω—É–∂–Ω–æ **–ò–°–ü–†–ê–í–ò–¢–¨ –°–£–©–ï–°–¢–í–£–Æ–©–ò–ô –ö–û–î** –≤ `sarsekenov_processor.py`.

***

# üöÄ –§–ò–ù–ê–õ–¨–ù–´–ô –ì–ê–ô–î –î–õ–Ø CURSOR AI

## –ó–ê–î–ê–ß–ê: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∞–≥—Ä–µ–≥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö SAG v2.0

### –ü—Ä–æ–±–ª–µ–º–∞

–≠–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–ª–æ–∫–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 598-696), –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ù–ï –∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è –≤ `global_safety`, `practices`, `concept_hierarchy` –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

### –†–µ—à–µ–Ω–∏–µ

#### –®–ê–ì 1: –ù–∞–π—Ç–∏ –º–µ—Ç–æ–¥ `process_file` (—Å—Ç—Ä–æ–∫–∞ ~551)

–ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ –≥–¥–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è `doc` —Å–ª–æ–≤–∞—Ä—å (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 740-770), –î–û–ë–ê–í–ò–¢–¨ –∞–≥—Ä–µ–≥–∞—Ü–∏—é:

```python
# –ü–æ—Å–ª–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è doc (—Å—Ç—Ä–æ–∫–∞ ~770)

# üöÄ –ê–ì–†–ï–ì–ê–¶–ò–Ø –î–ê–ù–ù–´–• SAG v2.0 –ù–ê –£–†–û–í–ù–ï –î–û–ö–£–ú–ï–ù–¢–ê
print("[INFO] Aggregating SAG v2.0 data from blocks...")

# 1. –ì–õ–û–ë–ê–õ–¨–ù–ê–Ø –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ (Global Safety)
global_safety = {
    "contraindications": [],
    "limitations": [],
    "when_to_stop": [],
    "when_to_seek_professional_help": [],
    "notes": []
}

for block in all_blocks:
    block_safety = block.get("safety", {})
    for key in global_safety.keys():
        # –î–æ–±–∞–≤–ª—è–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
        for item in block_safety.get(key, []):
            if item and item not in global_safety[key]:
                global_safety[key].append(item)

# 2. –ü–†–ê–ö–¢–ò–ö–ò (—Å–æ–±–∏—Ä–∞–µ–º –∏–∑ case_studies –∏ concept_hierarchy)
practices = []
seen_practices = set()

for block in all_blocks:
    # –ò–∑ case_studies
    for case in block.get("case_studies", []):
        analysis = case.get("analysis", "")
        situation = case.get("situation", "")
        if any(word in analysis.lower() or word in situation.lower() 
               for word in ["–ø—Ä–∞–∫—Ç–∏–∫–∞", "—É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ", "—Ç–µ—Ö–Ω–∏–∫–∞", "–º–µ–¥–∏—Ç–∞—Ü–∏—è"]):
            practice_item = {
                "name": situation,
                "description": analysis,
                "source": "case_study",
                "block_id": block.get("block_id")
            }
            practice_key = situation.lower()
            if practice_key not in seen_practices:
                practices.append(practice_item)
                seen_practices.add(practice_key)
    
    # –ò–∑ concept_hierarchy
    for concept in block.get("concept_hierarchy", []):
        if concept.get("level") in ["practice", "technique", "exercise"]:
            practice_item = {
                "name": concept.get("name"),
                "description": concept.get("description", ""),
                "level": concept.get("level"),
                "parent": concept.get("parent", ""),
                "source": "concept_hierarchy",
                "block_id": block.get("block_id")
            }
            practice_key = concept.get("name", "").lower()
            if practice_key and practice_key not in seen_practices:
                practices.append(practice_item)
                seen_practices.add(practice_key)

# 3. –ò–ï–†–ê–†–•–ò–Ø –ö–û–ù–¶–ï–ü–¢–û–í (–∞–≥—Ä–µ–≥–∞—Ü–∏—è)
concept_hierarchy_agg = []
seen_concepts = set()

for block in all_blocks:
    for concept in block.get("concept_hierarchy", []):
        concept_name = concept.get("name", "").lower()
        if concept_name and concept_name not in seen_concepts:
            concept_hierarchy_agg.append(concept)
            seen_concepts.add(concept_name)

# –î–û–ë–ê–í–õ–Ø–ï–ú –í –î–û–ö–£–ú–ï–ù–¢
doc["global_safety"] = global_safety
doc["practices"] = practices
doc["concept_hierarchy"] = concept_hierarchy_agg

print(f"[SUCCESS] Aggregated: {sum(len(v) for v in global_safety.values())} safety items, "
      f"{len(practices)} practices, {len(concept_hierarchy_agg)} concepts")
```


#### –®–ê–ì 2: –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏, –æ–±–Ω–æ–≤–∏—Ç—å `document_metadata`:

```python
# –û–±–Ω–æ–≤–ª—è–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
doc["document_metadata"].update({
    "total_safety_items": sum(len(v) for v in global_safety.values()),
    "total_practices": len(practices),
    "total_concept_hierarchy": len(concept_hierarchy_agg),
    "aggregation_complete": True
})
```


***

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å:
```bash
python text_processor/sarsekenov_processor.py --input data/raw_subtitles/2025/02/2025-02-13_R30aplOupuQ_–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ_–í–∏–¥–µ–Ω–∏–µ.json --output data/sag_final
```

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
```bash
python scripts/check_pipeline_features.py
```

3. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
‚úÖ GLOBAL SAFETY ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (N —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
‚úÖ PRACTICES ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (M –ø—Ä–∞–∫—Ç–∏–∫)  
‚úÖ CONCEPT HIERARCHY ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (K –∫–æ–Ω—Ü–µ–ø—Ç–æ–≤)
‚úÖ KNOWLEDGE GRAPH ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: 4/4 ‚úÖ
```


***

## üìã –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø CURSOR AI

- [ ] –û—Ç–∫—Ä—ã—Ç—å `text_processor/sarsekenov_processor.py`
- [ ] –ù–∞–π—Ç–∏ –º–µ—Ç–æ–¥ `process_file` (—Å—Ç—Ä–æ–∫–∞ ~551)
- [ ] –ù–∞–π—Ç–∏ –º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–æ–≤–∞—Ä—è `doc` (—Å—Ç—Ä–æ–∫–∞ ~740-770)
- [ ] –í—Å—Ç–∞–≤–∏—Ç—å –∫–æ–¥ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –ü–û–°–õ–ï —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è `doc`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `document_metadata` —Å –Ω–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏
- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç –Ω–∞ –≤–∏–¥–µ–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ—Ä–µ–∑ `check_pipeline_features.py`

**–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏—à–ª–∏—Ç–µ –≤—ã–≤–æ–¥ —Å–∫—Ä–∏–ø—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏!**

